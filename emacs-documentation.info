This is emacs-documentation.info, produced by makeinfo version 7.1 from
emacs-documentation.texi.


File: emacs-documentation.info,  Node: Top,  Next: Editeur,  Up: (dir)

Aide m√©moire emacs
******************

* Menu:

* Editeur::
* Modes majeurs::
* Modes mineurs::
* Int√©gration OS::
* Macros::
* Programmation et debug::
* org-mode::
* Tramp::
* Installation initiale pour Ubuntu sur HyperV::
* Liens externes::

-- The Detailed Node Listing --

Editeur

* Ouverture de fichiers::
* Edition::
* Recherches::
* Marquage de position dans des fichiers::
* Fen√™tres multiples::
* Fichier de configuration .emacs et .emacs.d/init.el: Fichier de configuration emacs et emacsd/initel.
* helm et listes plus puissantes::
* Themes et Font::
* Rectangles::
* Bookmarks::
* Onglets - tabs::
* Abr√©viations::
* Squelettes::
* Sauvegarde de layouts::
* V√©rification de l'orthographe::
* Packages::
* multiple-cursors::
* Autre::
* Installer emacs sur un Ubuntu neuf::

Edition

* Narrowing::

Fichier de configuration: .emacs et .emacs.d/init.el

* assignation de touches::
* Couleurs et masquage du menu / ic√¥nes::
* use-package pour chargement diff√©r√© de packages::
* Divers autre::
* Exemple avec helm+magit::

helm et listes plus puissantes

* Ecrire une extension √† Helm::

Sauvegarde de layouts

* workgroup2::
* winner-mode::

Packages

* D√©tail::

Installer emacs sur un Ubuntu neuf

* Installer une version plus r√©cente::

Modes majeurs

* markdown-mode::
* yaml-ts-mode::

Modes mineurs

* linum-mode::
* column-number-mode::
* winner-mode: winner-mode (1).
* show-parent-mode::
* which-key-mode::
* prettify-symbols-mode::
* auto-revert-tail-mode::
* white-space-mode::
* command-log-mode::
* ido-mode::
* desktop-save-mode::
* cua-mode::
* god-mode::

Int√©gration OS

* R√©pertoires::
* Impressions::
* Calculatrices::
* Terminaux et Man::
* Serveur emacs::
* Scripts sur un serveur distant depuis emacs::
* EIN - Emacs IPython Notebook::
* Navigateur web interne -  eww: Navigateur web interne - eww.
* Gestion des mails mu4e - Messagerie Exchange::
* Gestion des mails notmuch - Free/GMail::

Calculatrices

* Calculatrice RPN::
* Quick calc::
* Calculatrice Embedded::
* helm-calcul-expression::

Terminaux et Man

* eshell::

Scripts sur un serveur distant depuis emacs

* Examples::

Gestion des mails mu4e - Messagerie Exchange

* Accepter le certificat du serveur Exchange::
* Autre m√©thode pour accepter un certificat refus√©::
* M√©thode plus directe::
* R√©cup√©ration des mails avec offlineimap::
* Quelques raccourcis clavier::
* Filtre de recherche avec mu::

Gestion des mails notmuch - Free/GMail

* Installation: Installation (1).
* Utilisation::

Programmation et debug

* Debug de Bash::
* Debug de C et C++::
* Python::
* Perl::
* elpy pour les programmes python::
* java::
* eLISP::
* Buffer dired ouverts::
* SQL et CLI::
* TAGS::
* Folding::
* Docker::
* Puppet::
* Comparaisons::
* Suivi des versions de sources::

Debug de C et C++

* Indentation et styles::

Python

* Debug::
* Pony-mode::
* python-django::

elpy pour les programmes python

* Installation: Installation (2).
* Utilisation: Utilisation (1).

eLISP

* Chargement de modules::
* Minor-mode::
* Major_mode::
* Major-mode bas√© sur un mode existant::
* Affichage des macros elisp::
* Fabrication d'epub::

Buffer dired ouverts

* Buffer non associ√© √† un fichier::

Suivi des versions de sources

* Int√©gration dans emacs::
* magit::
* Pr√©paration du projet sur git::
* emacs et WikiJS::

org-mode

* Notes::
* Insertion de lien::
* Navigation dans les titres::
* Saisies agenda::
* Affichage des agendas::
* Chronom√©trage::
* org-roam::
* org-capture::
* Tableaux::
* Pr√©sentation reveal.js: Pr√©sentation revealjs.
* Pour aller plus loin::
* Org-babel et inclusion de sources::
* Inclusion de requ√™tes mysql::
* Inclusion de code SQLite::
* Inclusion de diagrammes Ditaa::
* Inclusion de sh√©mas UML::
* Exportation::
* Formules math√©matiques::
* Inclure des diagrammes::
* Produire un export Word avec un template::

Tableaux

* D√©parts::
* Saisies::
* Manipulation lignes et colonnes::
* Formules::

Exportation

* M√©thode actuelle simple::
* Pandoc::
* Suite √† disparition export odt, interface √† pandoc (histrique): Suite √† disparition export odt interface √† pandoc (histrique).

Tramp

* ssh::
* ftp::
* sudo::
* rclone Google Drive::
* Stockage des mots de passe::
* Copie de fichiers entre deux r√©pertoires tramp dired::



File: emacs-documentation.info,  Node: Editeur,  Next: Modes majeurs,  Prev: Top,  Up: Top

1 Editeur
*********

* Menu:

* Ouverture de fichiers::
* Edition::
* Recherches::
* Marquage de position dans des fichiers::
* Fen√™tres multiples::
* Fichier de configuration .emacs et .emacs.d/init.el: Fichier de configuration emacs et emacsd/initel.
* helm et listes plus puissantes::
* Themes et Font::
* Rectangles::
* Bookmarks::
* Onglets - tabs::
* Abr√©viations::
* Squelettes::
* Sauvegarde de layouts::
* V√©rification de l'orthographe::
* Packages::
* multiple-cursors::
* Autre::
* Installer emacs sur un Ubuntu neuf::


File: emacs-documentation.info,  Node: Ouverture de fichiers,  Next: Edition,  Up: Editeur

1.1 Ouverture de fichiers
=========================

C-x f filename
     ouvrir un fichier en root
C-x f /sudo:: filename
     ouvrir un fichier en root
C-x f _/scp:root@pde:/home_
     TRAMP, ouvrir un fichier sur une autre machine via SSH:
     ‚Äò/scp:root@hdvwww10.intranet.rouen.fr:/var/www/‚Äô.  Noter qu'il peut
     √™tre inutile de pr√©ciser ‚Äòscp:‚Äô qui est le protocole par d√©faut
     (identique √† ‚Äòssh:‚Äô).
helm-tramp
     tramp avec helm
        ‚Ä¢ il faut installer le package ‚Äòhelm-tramp‚Äô
        ‚Ä¢ il est utile d'ajouter de la configuration dans l'init, pour
          avoir un raccourci d'ouverture de tels fichiers distants par
          exemple:
               (setq tramp-default-method "ssh")
               (define-key global-map (kbd "C-c s") 'helm-tramp)
        ‚Ä¢ les choix en user courant et en root propos√©s sont trouv√©s √†
          partir des hosts d√©finis dans * ~/.ssh/config *
        ‚Ä¢ on peut faire de m√™me pour dired
        ‚Ä¢ lorsqu'on ouvre un eshell ou un shell depuis l'affichage d'un
          fichier/r√©pertoire tramp on a une ligne de commande vers le
          serveur corespondant, dans le dossier
C-x 4f
     ouvre un fichier dans une autre fen√™tre
C-x 52
     Ouvre une autre frame (fen√™tre au sens de l'OS)
     C-x 50
          pour la fermer
     C-x 51
          pour ne garder que la frame en cours
C-x b
     buffer, afficher un buffer, avec ido noter que *C-k* permet de
     fermer un buffer.
find-file-at-point
     (alias *ffap*) peut √™tre appel√© via *M-x*, ou ajout√© *.emacs* via
     *(setq ido-use-filename-at-point 'guess)* bien plus confortable: on
     mixte les avantage ido et *ffap*.
emacsclient
     il faut avoir lanc√© le serveur dans une session emacs *M-x
     server-start* puis *emacsclient -t fichier* dans une console (et
     sortie par *C-x #*)
Ouverture d'un fichier en tant que root
     apr√®s definition
          export SUDO_EDITOR='emacsclient -t '
     utiliser *sudo -e fichier* dans une console.  Depuis emacs on peut
     installer le package *sudo-edit* puis *M-x sudo-edit* puis saisie
     du nom de fichier (on peut aussi modifier un fichier actuellement
     en read-only avec *sudo-edit*).
M-x dired-jump
     Ouverture du r√©pertoire du fichier en cours


File: emacs-documentation.info,  Node: Edition,  Next: Recherches,  Prev: Ouverture de fichiers,  Up: Editeur

1.2 Edition
===========

M-/
     autocompl√©tion √† partir des mots des buffers ouverts (noms de
     variables existants...)
C-x u
     Undo
M-x undo-redo
     Redo (pour clavier fr ...)
Keys C-h F1
     liste tout les raccourcis commen√ßants par *keys*.  Mais installer
     le package *which-key* est mieux et l'activer par d√©faut via
     (which-key-mode t)
helm-descbinds
     pour une description pratique des key bindings, mais n√©cessite
     l'installation du package *helm-descbinds* depuis MELPA.  Si aim√©
     ajouter un ‚Äò(global-set-key (kbd "C-h b") 'helm-descbinds)‚Äô.
C-x h
     s√©lectionner tout le buffer (donc *C-x h C-w* efface le buffer.
C-x C-x
     √©changer la marque et le point
C-^
     join with prev line (contraire de *C-j*).
C-Spc C-Spc
     marquer une position pour y revenir
C-u C-Spc
     retour √† la marque pr√©c√©dente (dans le buffer courant)
C-x C-Spc
     retour √† la marque pr√©c√©dente (dans tous les buffers)
C-c %
     Marque la position courante pour y revenir plus tard (liste
     cumulative) semble limit√© au mode org, mais √† se g√©n√©raliser via
     mark-ring.el (pde)
C-c &
     Retourne √† la pr√©c√©dente position marqu√©e (multibuffer), limit√©
     aussi √† org par d√©faut
C-x r Spc Lettre
     Marque la position courante (fichier et ligne) dans le registre
     *Lettre*
C-x r j Lettre
     Retourne √† la postion du registre *Lettre*
M-backspace
     efface mot pr√©c√©dent
M-z
     zap to char, efface les caract√®res jusqu'au prochain char
M-;
     comment, met la r√©gion en commentaire (bascule)
C-x C-+
     Grossir la police utilis√©e dans le buffer (*C-x C-* pour diminuer).
     Juste apr√®s on peut changer avec une des touches +, - ou 0 (retour
     √† conf initiale)
C-x =
     Affiche tout sur le caract√®re sous le curseur (code ASCII,
     position...)
C-q
     escape next key (pour ins√©rer une touche sp√©ciale, la taper apr√®s)
Esc-Space
     r√©duit le nombre d'espaces entre les deux mots √† 1
C-u M-|
     remplace la r√©gion par le r√©sultat de son passage par une commande
     shell.  Ex: sort, grep ... (sans *C-u* affiche le r√©sultat
     temporairement, et l'envoi dans le buffer *Shell Command Output*)
C-u M-!
     ins√®re le r√©sultat d'une commande shell dans le buffer courant
     (sans *C-u* affiche juste le r√©sultat)
M-x revert-buffer-with-coding-system
     (C-x RET r) en pr√©cisant au prompt l'encodage en *UTF-8* permet de
     lire des fichier org issus de Linux dans Windows.  Noter que pour
     ne plus se poser la question, il est possible d'en faire le choix
     par d√©faut via une ligne dans init.el: *(prefer-coding-system
     'utf-8)*
set-buffer-file-coding-system
     semble permettre de corriger des err d'encodage (puis utf-16 ou
     UTF-8) on peut v√©rifier en clair la valeur actuelle de l'encodage
     du fichier avec *C-h v buffer-file-coding-system* (le fichier sera
     modifi√© sur disque apr√®s sa sauvegarde)
M-x recode-region
     doit permettre de corriger l'encodage d'une r√©gion (mais d√©pend de
     la connaissance de l'ancien encodage)
        ‚Ä¢ Forcer l'encodage du fichier via la modeline suivante:
               ;; Emacs 23 is unable to open this file properly:
               -*- coding: utf-16 -*- (ou latin-1 ou UTF-8)
M-C-v
     Scroll l'autre fen√™tre d'un √©cran vers le bas (aide, man, ...) et
     *M-C-V* dans l'autre sens.
C-x C-q
     bascule le mode Read-Only (de oui √† non)
M-x revert-buffer
     pour revenir √† la version enregistr√©e du buffer.
        ‚Ä¢ pour un revert sans confirmation ajouter dans init.el de
          ‚Äò(global-set-key (kbd "C-c !") (lambda () (interactive)
          (revert-buffer t t)))‚Äô

* Menu:

* Narrowing::


File: emacs-documentation.info,  Node: Narrowing,  Up: Edition

1.2.1 Narrowing
---------------

Pour se concentrer sur une partie du buffer en cours.
   ‚Ä¢ Le pr√©fixe de ces commandes est *C-x n*
     s
          Subtree, dans un Org file, permet de restreindre au titre
          courant
     d
          Defun, dans un source pour restreindre √† la d√©finition de la
          fonction courante
     w
          widen pour ne plus restreindre et retrouver le buffer complet


File: emacs-documentation.info,  Node: Recherches,  Next: Marquage de position dans des fichiers,  Prev: Edition,  Up: Editeur

1.3 Recherches
==============

C-s/r
     recherche incrementale (r pour reverse), noter qu'on retourne au
     point de d√©part par *C-g* et que *C-w* ins√®re le mot sous le
     curseur (r√©p√©t√© plusieurs fois, ajoute le mot suivant).

   Pour rechercher ou marquer une regexp dans le buffer
M-s o
     Occur, ouvre dans un buffer tous les match de la regexp (comme
     r√©sultat de compilation).  *g* permet de rafra√Æchir le r√©sultat de
     la requ√™te.  Dans le fichier *M-g n* pour le prochain match.
M-s w
     recherche un mot (*C-w* pour le mot courant) dans le buffer.
M-s h r
     Highlight Regexp, avec choix de couleur (voir
     *hi-lock-unface-buffer* pour retirer un des highlight)
M-x grep
     pr√©ciser la regexp puis le filtre de fichiers
M-x rgrep
     recursive, idem mais plus interactif
M-x lgrep
     local, idem mais un seul niveau de r√©pertoire
M-g M-n
     permet de se placer sur la prochaine occurence trouv√©e par le
     dernier grep (*M-g M-p* pour la pr√©c√©dente)

C-c C-j
     imenu jump to definition (si programme) ou titre pour org.  Permet
     en particulier le rescan des tags de speedbar via *C-c C-j * Tab
     Enter Enter* puis r√©ouvrir speedbar.
M-g g
     goto-line
M-g c
     goto-char (position en nombre de caract√®res, utile dans certaines
     erreurs elisp)
M-x speedbar
     permet une fen·∫øtre qui affiche sous forme d'arbre le r√©pertoire
     courant ou les buffers ouverts.  Dans le cas de sources, utilise
     imenu pour afficher les classes et fonctions
     Enter
          pour ouvrir le fichier
     f
          pour afficher les fichiers
     b
          pour les buffers ouverts
     k
          pour fermer le buffer
     D
          pour effacer le fichier (avec confirmation)
     g
          pour rafra√Æchir si n√©cessaire
     q
          pour quitter


File: emacs-documentation.info,  Node: Marquage de position dans des fichiers,  Next: Fen√™tres multiples,  Prev: Recherches,  Up: Editeur

1.4 Marquage de position dans des fichiers
==========================================

C-c %
     marque la position courante du fichier en cours
C-c &
     retourne √† la derni√®re position marqu√©e.  Si utilis√© plusieurs fois
     propose les pr√©c√©dentss


File: emacs-documentation.info,  Node: Fen√™tres multiples,  Next: Fichier de configuration emacs et emacsd/initel,  Prev: Marquage de position dans des fichiers,  Up: Editeur

1.5 Fen√™tres multiples
======================

C-x 0
     cache la fen√™tre en cours
C-x 1
     cache toutes les autre fen√™tres ou *Esc Esc Esc*
C-x 2
     S√©pare la fen√™tre en cours horizontalement
C-x 3
     S√©pare la fen√™tre en cours verticalement
C-x o
     Passage √† la fen√™tre suivante
C-x ^
     Agrandir verticalement la fen√™tre
C-x { et }
     Agrandir horizontalement (respectivement vers la gauche, la doite)
M-x elscreen
     si les fen√™tres ne suffisent pas, voir le package elscreen puis
     *elscreen-start* qui permet d'utiliser des onglets dans lesquels on
     a autant de r√©partitions de fen√™tres.  Utilisable avec la souris.
     C-z c
          permet de cr√©er un nouvel onglet
     C-z n
          passer √† l'onglet suivant (*p* pr√©c√©dent)
     C-z 0 .. 9
          pour aller √† l'onglet n
          Il reste √† trouver comment y lancer aptitude (pb de TERM ?)


File: emacs-documentation.info,  Node: Fichier de configuration emacs et emacsd/initel,  Next: helm et listes plus puissantes,  Prev: Fen√™tres multiples,  Up: Editeur

1.6 Fichier de configuration: .emacs et .emacs.d/init.el
========================================================

* Menu:

* assignation de touches::
* Couleurs et masquage du menu / ic√¥nes::
* use-package pour chargement diff√©r√© de packages::
* Divers autre::
* Exemple avec helm+magit::


File: emacs-documentation.info,  Node: assignation de touches,  Next: Couleurs et masquage du menu / ic√¥nes,  Up: Fichier de configuration emacs et emacsd/initel

1.6.1 assignation de touches
----------------------------

  1. Pour projet python

          (global-set-key
           (kbd "C-x C-g")
           (lambda () (interactive) (python-django-open-project "~/Dropbox/retrouve" "retrouve.settings")))

  2. Ouvrir le r√©pertoire du fichier courant

     (global-set-key "\C-xj" 'dired-jump) ;


File: emacs-documentation.info,  Node: Couleurs et masquage du menu / ic√¥nes,  Next: use-package pour chargement diff√©r√© de packages,  Prev: assignation de touches,  Up: Fichier de configuration emacs et emacsd/initel

1.6.2 Couleurs et masquage du menu / ic√¥nes
-------------------------------------------

   ‚Ä¢ Pour √©viter le fond noir en mode texte, essayer *M-x load-theme
     whitheboard* ou *dichromacy*
   ‚Ä¢ Si c'est en mode texte (-nw ou serveur en SSH) il faut ajouter
        ‚Ä¢ dans .bashrc ‚Äòexport TERM=xterm-256color‚Äô
        ‚Ä¢ ou son √©quivallent zsh ‚Äò.zshrc‚Äô les th√®mes qui semblent bien
          sont par exemple wombat et misterioso (sur un ubuntu r√©cent ?)
   ‚Ä¢ Masquage des menu et toolbar
          (menu-bar-mode -1)
          (tool-bar-mode -1)


File: emacs-documentation.info,  Node: use-package pour chargement diff√©r√© de packages,  Next: Divers autre,  Prev: Couleurs et masquage du menu / ic√¥nes,  Up: Fichier de configuration emacs et emacsd/initel

1.6.3 use-package pour chargement diff√©r√© de packages
-----------------------------------------------------

   ‚Ä¢ Suppose l'installation du package *use-package*
   ‚Ä¢ L'utilisation basique est ‚Äò(use-package nom-package :defer t)‚Äô
   ‚Ä¢ Pour charger lors d'une commande initiale, utiliser un param du
     type ‚Äò:commands xxx-mode‚Äô
   ‚Ä¢ Voir la substitution d'une macro via (compl√©ter !)


File: emacs-documentation.info,  Node: Divers autre,  Next: Exemple avec helm+magit,  Prev: use-package pour chargement diff√©r√© de packages,  Up: Fichier de configuration emacs et emacsd/initel

1.6.4 Divers autre
------------------

     (ido-mode t)
     ;;(ffap-bindings)
     (setq ido-use-filename-at-point 'guess)
     (load-library "iso-transl")
     (desktop-save-mode 1)
     (setq auto-save-default nil)  ; Pour ne plus faire d'autosave (TRAMP ...)
     (setq org-export-dispatch-use-expert-ui 1)
     (xterm-mouse-mode 1) ; Pour avoir un support souris dans un emacs dans terminal
     (require 'realgud) ; Pour debug de bash


File: emacs-documentation.info,  Node: Exemple avec helm+magit,  Prev: Divers autre,  Up: Fichier de configuration emacs et emacsd/initel

1.6.5 Exemple avec helm+magit
-----------------------------

Noter qu'il faut installer les packages use-package, helm et magit
     (package-initialize)

     ;; Aspect
     ;;(load-theme 'dichromacy)
     (load-theme 'wheatgrass)
     (setq inhibit-splash-screen t)
     (menu-bar-mode 0)
     (global-set-key (kbd "<f8>") 'menu-bar-open)

     ;; Ajouts de packages MELPA
     (when (>= emacs-major-version 24)
       (require 'package)
       (add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/"))
       ;;(add-to-list 'package-archives '("nongnu" . "https://elpa.nongnu.org/packages/"))
       (add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/")))
     (use-package  helm :ensure t)
     (require 'helm-config)
     (global-set-key (kbd "C-x C-f") 'helm-find-files)
     (global-set-key (kbd "C-x b") 'helm-buffers-list)
     (global-set-key (kbd "C-x rb") 'helm-bookmarks)
     (global-set-key (kbd "M-s o") 'helm-occur)
     (global-set-key (kbd "M-x") 'helm-M-x)
     (global-set-key (kbd "M-y") 'helm-show-kill-ring)
     (global-set-key (kbd "C-h i") 'helm-info)
     ;;(global-set-key (kbd "<f2><f2>") 'helm-calcul-expression)
     ;;(setq tramp-default-method "ssh")
     ;;(define-key global-map (kbd "C-c s") 'helm-tramp)

     (custom-set-variables
      ;; custom-set-variables was added by Custom.
      ;; If you edit it by hand, you could mess it up, so be careful.
      ;; Your init file should contain only one such instance.
      ;; If there is more than one, they won't work right.
      '(package-check-signature nil)
      '(package-selected-packages
        (quote
         (use-package helm magit gnu-elpa-keyring-update php-mode))))
     (custom-set-faces
      ;; custom-set-faces was added by Custom.
      ;; If you edit it by hand, you could mess it up, so be careful.
      ;; Your init file should contain only one such instance.
      ;; If there is more than one, they won't work right.


File: emacs-documentation.info,  Node: helm et listes plus puissantes,  Next: Themes et Font,  Prev: Fichier de configuration emacs et emacsd/initel,  Up: Editeur

1.7 helm et listes plus puissantes
==================================

   ‚Ä¢ Suppose l'installation du package *helm*
   ‚Ä¢ Voir une prise en main dans
     <https://boruch-baum.github.io/emacs_mini_manual/helm-intro.html>
   ‚Ä¢ Affiche des listes dynamiquement mises √† jour en fonction du
     pattern tap√©
   ‚Ä¢ possibilit√© de plusieurs pattern s√©par√©s par des espaces, et de *!*
     pour exclure.  Et d'√©chapper des caract√®res sp√©ciaux avec *\*,
     comme pour SPACE.
     @xx
          recherche xx dans le contenu des buffers
     *xx
          recherche par les noms de major-mode (shell, dired, lisp ...)
     /xx
          recherche par le nom du r√©pertoire du buffer
   ‚Ä¢ TAB affiche des actions sur l'√©l√©ment s√©lectionn√©
   ‚Ä¢ C-SPACE pour s√©lectionner plusieurs √©l√©ments de la liste
   ‚Ä¢ F2 dans helm-M-x permet d'avoir la doc emacs de la fonction
     s√©lectionn√©e
   ‚Ä¢ C-x f C-S pour faire une *recherche dans tous les fichiers du
     r√©pertoire* (type grep) √† partir de l'endroit o√π on a commenc√© un
     find file
   ‚Ä¢ C-t pour d√©placer le fen√™tre des suggestions (bascule)
   ‚Ä¢ Une configuration type r√©cup√©r√©e sur youtube est
     (use-package  helm :ensure t)
     (require 'helm-config)
     (helm-mode 1)
     (setq helm-split-window-inside-p t)
     (global-set-key (kbd "C-x C-f") 'helm-find-files)
     (global-set-key (kbd "C-x b") 'helm-buffers-list)
     (global-set-key (kbd "C-x rl") 'helm-bookmarks)
     (global-set-key (kbd "M-s") 'helm-occur)
     (global-set-key (kbd "M-x") 'helm-M-x)
     (global-set-key (kbd "M-y") 'helm-show-kill-ring)
     (global-set-key (kbd "C-h i") 'helm-info)
     (global-set-key (kbd "<f2><f2>") 'helm-calcul-expression)

* Menu:

* Ecrire une extension √† Helm::


File: emacs-documentation.info,  Node: Ecrire une extension √† Helm,  Up: helm et listes plus puissantes

1.7.1 Ecrire une extension √† Helm
---------------------------------

Voir
<https://wikemacs.org/wiki/How_to_write_helm_extensions#More_than_one_action>
Et pour un exemple impressionnnant en vid√©o, l'√©criture de helm-spotify
<https://www.youtube.com/watch?v=XjKtkEMUYGc>
   ‚Ä¢ L'appel principal est ‚Äò(helm :sources var-src :prompt "Saisir XX:
     ")‚Äô
   ‚Ä¢ Les sources peuvent √™tre du type
          (setq var-src- '((name . "S√©lection base Oracle sur ProxMox")
                  (candidates . bases-proxmox)
                  (action . (("Ouvrir le buffer shell de la s√©lection" . (lambda (x)
                                                                           (message "Affichage shell de %s sur %s" x (assq x bases-proxmox))))
                             ("Ouverture d'un dired en adminXX" . (lambda (x)
                                                                    (message "Ouverture de dired sur %s de %s en adminXXXX"
                                                                             x (assq x bases-proxmox))))
                             ("Ouverture d'un dired en root" . en-vrai)
                             ("Startup mount" . (lambda (x) (en-vrai x "startup mount")))
                             ("Shutdown immediate" . (lambda (x) (en-vrai x "shutdown immediate")))))))


File: emacs-documentation.info,  Node: Themes et Font,  Next: Rectangles,  Prev: helm et listes plus puissantes,  Up: Editeur

1.8 Themes et Font
==================

   ‚Ä¢ Font - Suggestions youtube
        ‚Ä¢ M-x customize
        ‚Ä¢ Rechercher *Faces* puis *Basic Faces* et *Default*
        ‚Ä¢ Font Family xos4 Terminus
        ‚Ä¢ Height 90 √† 120
        ‚Ä¢ D√©cocher *Foreground* et *Background*
   ‚Ä¢ Coding font voir <https://www.codingfont.com/>
        ‚Ä¢ permet de tester par comparaison successives sur un m√™me texte
        ‚Ä¢ j'ai choisi et t√©l√©charg√© *NovaMono* qu'on peut activer avec
          ‚Äò(set-frame-font "NovaMono-11")‚Äô
   ‚Ä¢ Theme spacemax
        ‚Ä¢ Installer via *M-x package-list-packages* choisir
          *spacsmax-theme*
        ‚Ä¢ L'activer via *M-x customize-themes*
        ‚Ä¢ Pour le mode terminal, penser √† ‚Äòexport TERM=xterm-256color‚Äô
   ‚Ä¢ Pour revenir √† une police fixe ‚Äò(set-frame-font "DejaVu Sans
     Mono-14" nil t)‚Äô


File: emacs-documentation.info,  Node: Rectangles,  Next: Bookmarks,  Prev: Themes et Font,  Up: Editeur

1.9 Rectangles
==============

Le rectangle est d√©fini par ses deux coins (Mark et Point) et les
commandes suivantes sont disponibles:
C-x r M-w
     copier la s√©lection en tant que rectangle
C-x r k
     kill, supprime le rectangle et le garde dans le kill ring
C-x r y
     yank, colle le contenu du rectangle
C-x r o
     open, d√©cale le texte en ins√©rant un rectangle de la taille de la
     s√©lection (place des espaces qui √©cale le reste vers la droite.
C-x r t
     ins√®re une cha√Æne devant toutes les lignes du rectangle
C-x SPC
     d√©but du marquage d'un rectangle, permet via *M-w* et *C-y* de
     copier coller le rectangle.


File: emacs-documentation.info,  Node: Bookmarks,  Next: Onglets - tabs,  Prev: Rectangles,  Up: Editeur

1.10 Bookmarks
==============

C-x r l
     List Bookmarks (stock√© dans ~/.emacs.d/bookmarks)
C-x r m
     Mark new Bookmark
Dans la liste
     les touches principales sont:
     Enter
          pour afficher le fichier marqu√©
     d
          delete, pour marquer un bookmark pour effacement
     u
          unmark, pour retirer la marque de la ligne courante
     x
          pour ex√©cuter les effacements demand√©s.
C-x r C-SPC
     Stocker la position courante dans un registre (chosir une lettre)
C-x r j
     Jump, retourner au point stock√© dans le registre (taper la lettre
     choisie comme registre)
Nautilus
     le fichier d√©finissant les bookmarks Ubuntu est dans
     ~/.config/gtk-3.0/bookmarks et il est recharg√© d√®s sa sauvegarde.


File: emacs-documentation.info,  Node: Onglets - tabs,  Next: Abr√©viations,  Prev: Bookmarks,  Up: Editeur

1.11 Onglets - tabs
===================

Pour afficher ou cacher les onglets *M-x tab-bar-mode*
C-x t 2
     Cr√©e un nouvel onglet (tab-new)
C-x t o
     S√©lectionner l'onglet suivant
C-x t 0
     Ferme l'onglet courant
C-x t 1
     Ferme tous les onglets sauf le courant
C-x t ?
     Aide sur les autres raccourcis
   Voir pour faire des raccourcis plus faciles ?  On peut aussi renommer
l'onglet courant via ‚Äòtab-bar-rename-tab NOM‚Äô


File: emacs-documentation.info,  Node: Abr√©viations,  Next: Squelettes,  Prev: Onglets - tabs,  Up: Editeur

1.12 Abr√©viations
=================

C-x aig
     abbrev inverse global, √† taper apr√®s l'abr√©viation, il faut ensuite
     saisir le texte complet, termin√© par return.  Il est possible de
     coller un texte multiligne.
M-x list-abbrevs
     Affiche tous les tables d'abr√©viations courantes, avec possibilit√©
     d'en effacer (C-k) ou d'en modifier.  Il faut utiliser *C-c C-c*
     pour valider les modifications.
M-x abbrev-mode
     Active le mode abbrev pour le buffer en cours (bascule)


File: emacs-documentation.info,  Node: Squelettes,  Next: Sauvegarde de layouts,  Prev: Abr√©viations,  Up: Editeur

1.13 Squelettes
===============

   ‚Ä¢ d√©finition en lisp du type
          (define-skeleton hello-world-skeleton
             "Write a greeting (commentaire)"
             "Type name of user (prompt) : "
             > "hello, " str "!" \n >
             "I need " _ ", and you are the person for it..." \n
             "--" \n "La direction")
     str
          est remplac√© par la saisie utilisateur
     ‚Äò_‚Äô
          permet de placer la position du curseur
     >
          augmente l'indentation (si cela a un sens dans le mode
          courant)
     \n
          ins√®re un saut de ligne
     -NN
          recule de NN caract√®res

   ‚Ä¢ Apr√®s d√©finition on a une fonction interactive (ici
     *hello-world-skeleton*) qui ins√®re le squelette

   ‚Ä¢ Exemples:
          (define-skeleton html-skeleton
             "Ins√®re une page HTML basique avec un titre √† saisir..."
             "Titre de la page : "
             "<html>" \n
             > "<head>" \n
             > "<title>" str "</title>" \n
             -2 "</head>" \n
             > "<body>" \n
             > "<p>" _ "</p>" \n
             -2 "</body>" \n
             -2 "</html>")
          (define-skeleton org-skel
             "En t√™te pour mes fichiers org"
             "Titre : "
             "#+TITLE: " str \n
             "#DATE: " (date) \n
             "#+OPTIONS: toc:nil" \n
             "#+SETUPFILE: theme-readtheorg-local.setup" \n
             "#+AUTHOR: Pierre DEDIEU" \n
             "#+Email: MangeChats@gmail.com" \n \n)
          (global-set-key "\C-ch" 'org-skel)


File: emacs-documentation.info,  Node: Sauvegarde de layouts,  Next: V√©rification de l'orthographe,  Prev: Squelettes,  Up: Editeur

1.14 Sauvegarde de layouts
==========================

Il s'agit de sauver les positions des fen√™tres et les buffers qu'ils
contiennent

* Menu:

* workgroup2::
* winner-mode::


File: emacs-documentation.info,  Node: workgroup2,  Next: winner-mode,  Up: Sauvegarde de layouts

1.14.1 workgroup2
-----------------

   ‚Ä¢ Utiliser le package *workgroup2*
   ‚Ä¢ C-c z C-c create wg, demande un nom pour sauver le layout courant
   ‚Ä¢ C-c z C-v open wg, permet de choisir et de restaurer un des layouts
     sauv√©s
   ‚Ä¢ En compl√©ment ‚Äò(desktop-save-mode 1)‚Äô dans *init.el* permet de
     restaurer les buffers ouverts au d√©marage d'emacs


File: emacs-documentation.info,  Node: winner-mode,  Prev: workgroup2,  Up: Sauvegarde de layouts

1.14.2 winner-mode
------------------

   ‚Ä¢ Voir *note winner-mode: winner-mode (1). plus l√©ger et efficace


File: emacs-documentation.info,  Node: V√©rification de l'orthographe,  Next: Packages,  Prev: Sauvegarde de layouts,  Up: Editeur

1.15 V√©rification de l'orthographe
==================================

via les paquet *ispell* et *aspell-fr*.
M-x flyspell-mode
     pour une v√©rification des mots d√®s leur frappe.  Comme c'est la
     solution que je pr√©f√®re je lui d√©die F5: ‚Äò(global-set-key (kbd
     "<f5>") 'flyspell-mode)‚Äô
M-$
     Pour le mot courant (en flyspell-mode c'est une correction facile).
     Les alternatives sont *C-M-i* et *ESC i*
M-x ispell-buffer
     pour proposer des choix de correction en fran√ßais
M-x ispell-region
     RAS
M-x flyspell-buffer
     permet de souligner les erreurs apr√®s v√©rification de tout le
     buffer mais les corrections sont laborieuses, voir plut√¥t
     flyspell-mode.
M-x flyspell-goto-next-error
     vraiment mieux si assign√© via ‚Äò(global-set-key (kbd "<f5>")
     'flyspell-goto-next-error)‚Äô
M-x flyspell-correct-word-before-point
     gagnerait √† √™tre assign√© √† une touche ?  mouse-2 down doit √™tre
     maintenu pour voir les choix propos√©s (seuls les boutons du bas
     marchent pour cela sur mon PC HP !).


File: emacs-documentation.info,  Node: Packages,  Next: multiple-cursors,  Prev: V√©rification de l'orthographe,  Up: Editeur

1.16 Packages
=============

installation de packages suppl√©mentaires depuis internet
M-x list-packages
     affiche la liste des noms disponibles dans le d√©p√¥t d√©fini, puis
     Entr√©e sur un nom donne quelques infos compl√©mentaires et permet
     d'installer.  (ex: ido-ubiquous)
D√©finir quel shell utiliser
     pour que la valeur par d√©faut soit chang√©e un param√®tre √† mettre
     dans le init.el: '(python-shell-interpreter "python3") qui peut
     aussi se changer via *Customize*
ajouter le d√©p√¥t MELPA
     il faut ajouter dans ~/.emacs les lignes.  Voir quelle URL est la
     plus int√©ressante
          (when (>= emacs-major-version 24)
            (require 'package)
            (add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/"))
            ;;(add-to-list 'package-archives '("nongnu" . "https://elpa.nongnu.org/packages/"))
            (add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/"))
            (package-initialize))
     Pour les erreur de clef GPG au chargement essayer ‚Äògpg --homedir
     ~/.emacs.d/elpa/gnupg --receive-keys 066DAFCB81E42C40‚Äô
     Puis il faut rafra√Æchir la liste des packages avec la touche *r*.
     On peut s√©lectionner un package avec *i* et installer la s√©lection
     avec *x*

* Menu:

* D√©tail::


File: emacs-documentation.info,  Node: D√©tail,  Up: Packages

1.16.1 D√©tail
-------------

une source est <http://melpa.org/#/getting-started> suppose de l'ajouter
dans init.el ... puis via l'acc√®s internet l'installation se fait via la
commande *package-list-packages*.  Voir mode-php, python-django ...


File: emacs-documentation.info,  Node: multiple-cursors,  Next: Autre,  Prev: Packages,  Up: Editeur

1.17 multiple-cursors
=====================

   ‚Ä¢ Voir le README (https://github.com/magnars/multiple-cursors.el) du
     Git
   ‚Ä¢ ajouter dans *init.el* ‚Äò(require 'multiple-cursors)‚Äô
   ‚Ä¢ utiliser des set-key car les appels via *M-x* buggent
   ‚Ä¢ mc/edit-lines pour mettre un curseur devant chaque ligne de la
     selection courante
   ‚Ä¢ mc/mark-next-like-this place un curseur avant le prochain match du
     mot s√©lectionn√©
   ‚Ä¢ mc/mark-all-like-this pour tous les matchs
          (require 'multiple-cursors)
          (global-set-key (kbd "C-c √† √†") 'set-rectangular-region-anchor)
          (global-set-key (kbd "C-c √† l") 'mc/edit-lines)
          (global-set-key (kbd "C-c √† a") 'mc/mark-all-like-this)
          (global-set-key (kbd "C-c √† n") 'mc/mark-next-like-this)


File: emacs-documentation.info,  Node: Autre,  Next: Installer emacs sur un Ubuntu neuf,  Prev: multiple-cursors,  Up: Editeur

1.18 Autre
==========

M-x toggle-truncate-lines
     Pour changer la coupure des lignes longues
C-h l
     view-loosage, affiche un buffer avec les derni√®res commandes tap√©es
M-x : (buffer-file-name)
     affiche le chmin complet du fichier associ√© au buffer courant
M-x find-name-dired
     affiche dans un dired tout les fichiers √† partir d'un r√©pertoire de
     d√©part dont le nom correspond √† un nom (avec * comme wildcar)
M-:
     √©valuer du code elisp, exemple ‚Äò(current-buffer)‚Äô mais pour avoir
     le r√©pertoire *C-x b* est plus complet
C-x 8 Ret
     Lit un caract√®re UTF8 par nom ou no et l'ins√®re
        ‚Ä¢ on peut taper ‚Äò*substring‚Äô puis tabulation pour la compl√©tion
        ‚Ä¢ üòâ ou üßê üò¢ üëç üëé üíã üòé ü§≠ sont possibles
        ‚Ä¢ ajouter via abbrev des raccourcis pour cela avec ‚ÄòM-x
          list-abbrevs‚Äô puis par exemple saisir (et valider par *C-c
          C-c*)
               "bg"               3    "üêõüêõüêõüêõ"
               "ks"               1    "üíã"
               "lm"               1    "Œª"
               "sg"               1    "üòé"
               "tdo"               1    "üëé"
               "tup"               1    "üëç"
C-h i
     oDemande un nom de fichier info et l'ouvre (avec helm il est tr√®s
     simple de le retrouver avec une partie de son nom)


File: emacs-documentation.info,  Node: Installer emacs sur un Ubuntu neuf,  Prev: Autre,  Up: Editeur

1.19 Installer emacs sur un Ubuntu neuf
=======================================

   ‚Ä¢ installer le paquet emacs
   ‚Ä¢ Ajouter les lignes pour avoir Melpa (dans *~/.emacs.d/init.el*)
   ‚Ä¢ utiliser M-x package-init-package pour installer des paquets
     minimum
        ‚Ä¢ use-package
        ‚Ä¢ org-roam-ui
   ‚Ä¢ ajouter un theme, et le param√©trage de org et helm
   ‚Ä¢ optionnellement installer les fichiers info pour emacs et elisp via
     ‚Äòapt install emacs-common-non-dfsg‚Äô qui permet par exemple la
     consultation avec M-x ‚Äòemacs-index-search‚Äô et ‚Äòelisp-index-search‚Äô

* Menu:

* Installer une version plus r√©cente::


File: emacs-documentation.info,  Node: Installer une version plus r√©cente,  Up: Installer emacs sur un Ubuntu neuf

1.19.1 Installer une version plus r√©cente
-----------------------------------------

   ‚Ä¢ avec un d√©p√¥t sp√©cifique ‚Äòapt-add-repository ppa:ubuntu-elisp/ppa‚Äô
        ‚Ä¢ ‚Äòapt update‚Äô puis ‚Äòapt-get install emacs-snapshot‚Äô
        ‚Ä¢ et pour revenir en arri√®re ‚Äòadd-apt-repository --remove
          ppa:ubuntu-elisp/ppa‚Äô
        ‚Ä¢ puis ‚Äòapt remove emacs-snapshot‚Äô
   ‚Ä¢ avec snap
        ‚Ä¢ ‚Äòapt remove emacs emacs-gui‚Äô puis ‚Äòsnap install emacs
          --classic‚Äô
        ‚Ä¢ et pour la d√©sinstallation ‚Äòsnap remove emacs‚Äô
   ‚Ä¢ il est aussi possible de le faire via flatpack, voir
     <https://learnubuntu.com/install-emacs/>


File: emacs-documentation.info,  Node: Modes majeurs,  Next: Modes mineurs,  Prev: Editeur,  Up: Top

2 Modes majeurs
***************

Un seul mode majeur peut √™tre actif dans un buffer

* Menu:

* markdown-mode::
* yaml-ts-mode::


File: emacs-documentation.info,  Node: markdown-mode,  Next: yaml-ts-mode,  Up: Modes majeurs

2.1 markdown-mode
=================

Documentation en Markdown.  Installer le package, puis ce mode permet
surtout un affichage des enrichissements


File: emacs-documentation.info,  Node: yaml-ts-mode,  Prev: markdown-mode,  Up: Modes majeurs

2.2 yaml-ts-mode
================

Pour √©dition de fichiers YAML


File: emacs-documentation.info,  Node: Modes mineurs,  Next: Int√©gration OS,  Prev: Modes majeurs,  Up: Top

3 Modes mineurs
***************

on peut cumuler les modes mineurs.  Je liste par oardre d"int√©r√™t
personnel d√©croissant (tr√®s subjectif)

* Menu:

* linum-mode::
* column-number-mode::
* winner-mode: winner-mode (1).
* show-parent-mode::
* which-key-mode::
* prettify-symbols-mode::
* auto-revert-tail-mode::
* white-space-mode::
* command-log-mode::
* ido-mode::
* desktop-save-mode::
* cua-mode::
* god-mode::


File: emacs-documentation.info,  Node: linum-mode,  Next: column-number-mode,  Up: Modes mineurs

3.1 linum-mode
==============

affiche les no de lignes du buffer.


File: emacs-documentation.info,  Node: column-number-mode,  Next: winner-mode (1),  Prev: linum-mode,  Up: Modes mineurs

3.2 column-number-mode
======================

pour afficher la colonne courante


File: emacs-documentation.info,  Node: winner-mode (1),  Next: show-parent-mode,  Prev: column-number-mode,  Up: Modes mineurs

3.3 winner-mode
===============

Permet via *C-<left>* et *C-<right>* de retrouver le layout pr√©c√©dent /
suivant.  Le layout est la taille et position des diff√©rentes fen√™tres
dans un √©cran.
   ‚Ä¢ En compl√©ment, *ace-window* permet de passer par no d'une des
     fen√™tres √† une autre (raccourci sugg√©r√© *M-o*)


File: emacs-documentation.info,  Node: show-parent-mode,  Next: which-key-mode,  Prev: winner-mode (1),  Up: Modes mineurs

3.4 show-parent-mode
====================

Affichage de l'autre parenth√®se... pour s'y d√©placer on a *C-M-n* et
*C-M-p*


File: emacs-documentation.info,  Node: which-key-mode,  Next: prettify-symbols-mode,  Prev: show-parent-mode,  Up: Modes mineurs

3.5 which-key-mode
==================

Apr√®s une demi seconde suite √† un pr√©fixe affiche toutes les
possibilit√©s de touches pour appeler des fonctions


File: emacs-documentation.info,  Node: prettify-symbols-mode,  Next: auto-revert-tail-mode,  Prev: which-key-mode,  Up: Modes mineurs

3.6 prettify-symbols-mode
=========================

Affichage de symboles UTF-8 √† la place de leur noms pour les modes qui
le supportent.  Par exemple pour afficher lambda Œª dans un source lisp
on a *prettify-symbols-alist* qui vaut ‚Äò(("lambda" . 955))‚Äô car code 955
en d√©cimal
   ‚Ä¢ utiliser ‚Äò(global-prettify-symbols-mode 1)‚Äô dans init.el pour le
     g√©n√©ralser


File: emacs-documentation.info,  Node: auto-revert-tail-mode,  Next: white-space-mode,  Prev: prettify-symbols-mode,  Up: Modes mineurs

3.7 auto-revert-tail-mode
=========================

Pour un fichier de log permet de se maintenir √† la fin et d'en afficher
le contenu toujours √† jour


File: emacs-documentation.info,  Node: white-space-mode,  Next: command-log-mode,  Prev: auto-revert-tail-mode,  Up: Modes mineurs

3.8 white-space-mode
====================

toggle, permet d'afficher les espaces (gros points) et les fins de ligne
($).  Utile pour d√©bug de fichiers yaml par exemple.


File: emacs-documentation.info,  Node: command-log-mode,  Next: ido-mode,  Prev: white-space-mode,  Up: Modes mineurs

3.9 command-log-mode
====================

Affichage des commandes
   ‚Ä¢ Installer le package *command-log*
   ‚Ä¢ Lancer commande *command-log-mode*
   ‚Ä¢ C-c o Bascule l'affichage ou non des derni√®res commandes


File: emacs-documentation.info,  Node: ido-mode,  Next: desktop-save-mode,  Prev: command-log-mode,  Up: Modes mineurs

3.10 ido-mode
=============

Ajouter dans init.el ‚Äò(require 'ido)(ido-mode t)‚Äô permet une completion
am√©lior√©e pour les ouvertures de fichiers et les switchs de buffer.
Pour les cas o√π c'est g√™nant, on retrouve le comportement habituel avec
un autre *C-f*.  Pour les r√©pertoires on red√©couvre *C-x d* (Dired),
mais noter que pour ouvrir un r√©pertoire comme un dossier, il est aussi
possible d'utiliser *C-x f C-f* (alternative que je pr√©f√®re: *helm*).


File: emacs-documentation.info,  Node: desktop-save-mode,  Next: cua-mode,  Prev: ido-mode,  Up: Modes mineurs

3.11 desktop-save-mode
======================

Ajouter dans init.el ‚Äò(desktop-save-mode 1)‚Äô pour retrouver les buffers
ouverts et leurs positions lors du prochain d√©marrage d'emacs
(finalement pas gard√©, je ne travaille pas assez sur les m√™mes
fichiers).


File: emacs-documentation.info,  Node: cua-mode,  Next: god-mode,  Prev: desktop-save-mode,  Up: Modes mineurs

3.12 cua-mode
=============

pour curseurs multiples
M-x cua-mode
     activer le mode (toggle, attention aux conflits des touches std
     emacs)
C-Enter
     marquer le d√©but de la s√©lection cua, puis d√©placer le curseur avec
     les fl√®ches pour √©tendre la s√©lection et terminer par *M-Enter*


File: emacs-documentation.info,  Node: god-mode,  Prev: cua-mode,  Up: Modes mineurs

3.13 god-mode
=============

Avec le paquet *god-mode* pour taper directement le commandes
n√©cessitant l'utilisation de la touche *Control*
   ‚Ä¢ Bascule avec ‚Äò(god-mode-all)‚Äô ou ‚Äò(god-local-mode)‚Äô
        ‚Ä¢ Je propose ‚Äò(global-set-key "C-¬≤" 'god-local-mode)‚Äô
   ‚Ä¢ pr√©c√©der une LETTRE de *g* pour ins√©rer *M-LETTRE*
   ‚Ä¢ pr√©c√©der une lettre de *G* pour ins√©rer *C-M-LETTRE*
   ‚Ä¢ pour taper une suite de *lettres sans Control*, les pr√©fixer d'un
     espace


File: emacs-documentation.info,  Node: Int√©gration OS,  Next: Macros,  Prev: Modes mineurs,  Up: Top

4 Int√©gration OS
****************

* Menu:

* R√©pertoires::
* Impressions::
* Calculatrices::
* Terminaux et Man::
* Serveur emacs::
* Scripts sur un serveur distant depuis emacs::
* EIN - Emacs IPython Notebook::
* Navigateur web interne -  eww: Navigateur web interne - eww.
* Gestion des mails mu4e - Messagerie Exchange::
* Gestion des mails notmuch - Free/GMail::


File: emacs-documentation.info,  Node: R√©pertoires,  Next: Impressions,  Up: Int√©gration OS

4.1 R√©pertoires
===============

C-x d
     Dired, Directory Edition.  Si on veut on peut pr√©ciser un filtre
     pour les fichiers √† lister genre
     ‚Äò/var/log/Vulture/worker/*.access.log‚Äô pour ne lister que les logs
     actifs de Vulture3 par exemple
     m/u
          mark / unmark, pour s√©lectionner / d√©selectionner le fichier
          sous le curseur
     D
          Delete, efface les fichiers s√©lectionn√©s
     k
          retire les fichiers s√©lectionn√©s de l'affichage
     U
          Unmark all, d√©-s√©lectionne tout
     a
          au lieu de Return sur un r√©pertoire permet de le visiter sans
          conserver le dired source (comande √† confirmer comme
          dangeureuse)
     j
          jump demande un nom de fichier du repertoire courant et
          positionne le curseur dessus
     M
          Mode, pour changer le mode du fichier courant (saisir a+x ou
          655 par exemple)
     O
          Owner pour changer le proprit√©aire du fichier
     %m
          pour s√©lectionner des fichiers via une regex (\.py$ ou ~$ par
          exemple)
     A
          pour rechercher un mot dans les fichiers marqu√©s et se placer
          √† la premi√®re occurrence du premier fichier (puis utiliser
          *M-;* pour se placer sur l'occurrence suivante)
     Q
          pour faire un search / replace sur tous les fichiers
          s√©lectionn√©s (avec confirmation).  Cela ne sauve pas les
          fichiers modifi√©s, √† faire par exemple avec *C-x s*.
     i
          si plac√© sur un r√©pertoire, ajoute la liste de ses fichiers √†
          la fin du buffer.  Puis *$* pour replier ou *C-u k* pour
          retirer le r√©pertoire du listing
C-u s
     pour changer l'ordre du tri ou le format d'affichage (voir man ls)
     -latS
          trier par taille de fichier d√©croissant
     -lah
          tailles en human readable
     -lR
          affiche r√©cursivement le contenu
$
     replie/d√©plie un sous r√©pertoire quand dired en liste plusieurs
M-x find-name-dired
     affiche dans un dired les fichiers correspondants √† un nom
M-x find-grep-dired
     afficher dans un dired les fichiers dont le contenu match une
     regexp


File: emacs-documentation.info,  Node: Impressions,  Next: Calculatrices,  Prev: R√©pertoires,  Up: Int√©gration OS

4.2 Impressions
===============

   ‚Ä¢ Je recommande la fonction *ps-print-with-faces*
   ‚Ä¢ Attention il faut que l'imprimante CUPS soit d√©finie comme
     imprimante par d√©faut de lpr
        ‚Ä¢ pour cela il faut consulter <http://localhost:631>
        ‚Ä¢ dans *Imprimantes* choisir pour la bonne imprimante list√©e la
          t√¢che d'administration *D√©finir par d√©faut*
   ‚Ä¢ Elle peut √™tre customis√©e via *ps-print-customize*, en particulier
     j'ai retenu:
     Ps N Up printing
          √† *2* pour mettre 2 pages par page A4.
     Ps N Up Border P
          √† *off* pour √©viter des cadres inutiles
   ‚Ä¢ Dans *ps-print Ps Lpr Switches* voir *-o sides=two-sided-long-edge*
     pour faire du recto/verso


File: emacs-documentation.info,  Node: Calculatrices,  Next: Terminaux et Man,  Prev: Impressions,  Up: Int√©gration OS

4.3 Calculatrices
=================

* Menu:

* Calculatrice RPN::
* Quick calc::
* Calculatrice Embedded::
* helm-calcul-expression::


File: emacs-documentation.info,  Node: Calculatrice RPN,  Next: Quick calc,  Up: Calculatrices

4.3.1 Calculatrice RPN
----------------------

acc√®s par *C-x * c*
??...
     pour les aides en mini buffer
q
     pour quit
y
     yank (colle le top dans le buffer d'origine)
U
     undo
D
     redo
p NN
     ajuste la pr√©cision √† NN chiffres (2000 possible!)
ds
     affichage scientifique (argument optionnel = nb de chiffres)
dn
     retour affichage normal
ch
     affiche en Heure Minutes Secondes (dh permet d'en d√©finir le
     format).  Les saisies directes se font par ex.  comme 11h12m30
16#XXX
     saisie de chiffres en hexa
d NN
     Affichage en base NN
dB et dO
     affiche en big ou normal les formules
ms
     bascule, mode calcul symbolique (les racines ou quotients
     restent...)
mf
     bascule, les fractions restent (et se simplifient) (*cf* pour la
     calculer), on peut changer cet affichage cia *do* qui demande un
     s√©parateur (/ ou : par exemple, mais +/ permet d'isoler la partie
     enti√®re)
cF
     convertie en fraction
g
     groupe les chiffres 3 par 3 (ou autre)
td
     Affiche ou cache l'historique (trail)
tn ou tp
     previous ou next du Trail
t[ ou t]
     d√©but ou fin du trail
ty
     paste le chiffre choisi du trail
dt
     Truncate stack, ins√®re temporairement le point √† la position du
     curseur
Alt-Gr 7 Alt-Gr 7
     Pour √©diter une entr√©e de la pile (sortir avec *Ret*)
'
     Alg√©brique, permet aussi la saisie de valeur avec leurs unit√©s
     (mi/hr km ...)
     mO
          d√©sactive les simplifications alg√©briques par d√©faut, on peut
          les faire alors via *av* (qui ne substitue pas les variables
          par leurs valeurs contrairement √† *=*).  Voir aussi *ae* qui
          fait les simplifications √©tendues.
     cu
          permet de saisir une autre unit√© de destination.
     aS
          Solve, demande la variable selon laquelle r√©soudre, marche
          pour des polyn√¥mes, des syst√®mes d'√©quations...
     aC
          Collect, pour d√©velopper selon une variable
     af
          Fatorize, pour factoriser dans la mesure du possible, selon
          une variable.
     aD
          D√©river, pr√©ciser selon quelle variable ET *ms* est votre ami
          (Symbolique !)
     aI
          Int√©grer, demande de pr√©ciser selon quelle variable.
     M-u aI
          Int√©grale d√©finie avec bornes: pr√©ciser les bornes de d√©but /
          fin
[x + y = a , x y = 1]
     saisie d'un syst√®me d'√©quations, puis *aS x,y* donne les solutions
' <31 aug 64>
     saisie de ma date de naissance
hk tN
     lire la doc de *tN*


File: emacs-documentation.info,  Node: Quick calc,  Next: Calculatrice Embedded,  Prev: Calculatrice RPN,  Up: Calculatrices

4.3.2 Quick calc
----------------

M-x quick-calc
     Calculatrice alg√©brique simple, √©crire la formule √† √©valuer, Enter
     affiche le r√©sultat.  Puis R√©sultat r√©cup√©rable par *C-y*.


File: emacs-documentation.info,  Node: Calculatrice Embedded,  Next: helm-calcul-expression,  Prev: Quick calc,  Up: Calculatrices

4.3.3 Calculatrice Embedded
---------------------------

Pour √©crire des devoirs de math ou physique.  On r√©dige un document
principal, en particulier en mode org ou LaTex et on d√©limite des
formules, par exemple en les entourant de *$$* ou de lignes vides
(recommand√©).  calc-embedded, o√π on peut utiliser les commandes
C-x * e
     Edit, permet de passer la formule courante en √©dition de la
     calculatrice classique sur la formule alg√©brique courante.  En
     particulier on peut en changer les unit√©es via *cu*, ou l'√©valuer
     via *=*.  Pour retourner √† l'√©dition normale du buffer, utiliser
     *C-x * e*.  Deux cas particuliers: l'assignation via *:=* et
     l'utilisation de *=>* en fin de ligne pour faire afficher
     l'√©valuation de la formule (cumulable avec une assignation).
C-x * d
     Duplicate, pour copier la formule en cours sur une autre ligne
     (pour la faire √©voluer, en d√©veloppant, r√©duisant, changeant
     d'unit√©s ...)
C-x a
     All, permet de parcourir tout le fichier et d'interpr√©ter toutes
     les formules trouv√©es.
C-x u
     Update, permet de rafra√Æchir le calcul sous le curseur.
C-x * AltGr 7 AltGr7
     pour modifier la formule sous le curseur.  Sortir ensuite via
     *Ret*.
C-x * j
     Permet de s√©lectionner une partie de la formule pour l'√©diter... je
     ne ma√Ætrise pas pour l'instant!
C-x * g
     Grab, met la s√©lection dans la calculatrice (en vecteur si espaces
     ou multiligne)
C-x * r
     Rectangle, pour d√©finir en matrice la s√©lection
C-x * ‚Äò_‚Äô
     somme les lignes d'une matrice (donne un vecteur)
C-x * :
     somme les colonnes d'une matrice (donne un vecteur)


File: emacs-documentation.info,  Node: helm-calcul-expression,  Prev: Calculatrice Embedded,  Up: Calculatrices

4.3.4 helm-calcul-expression
----------------------------

Pour un rapide calcul avec *Enter* pour r√©cup√©rer le r√©sultat dans le
kill-ring (j'associe √† F5)


File: emacs-documentation.info,  Node: Terminaux et Man,  Next: Serveur emacs,  Prev: Calculatrices,  Up: Int√©gration OS

4.4 Terminaux et Man
====================

M-x shell
     Pour passer des commandes bash dans un buffer.  Pour en lancer un
     deuxi√®me sous un autre nom, utiliser *C-u M-x shell*.
my-shell
     Pour ouvrir directement un shell sur un srv distant
          (defun my-shell ()
            (interactive)
            (let ((default-directory "/ssh:user@host:"))
              (shell)))
M-x ansi-term
     (ou term) Pour lancer des programmes qui ne sont pas support√©s par
     le shell, comme aptitude ... Pour sortir du buffer penser au menu
     via *F10*., Noter qu'il existe deux modes, le mode *char* par
     d√©faut, et le mode *line*
     C-c b
          Pour passer √† un autre buffer.
     C-c C-j
          Pour passer en mode *line* (qui permet de remonter dans
          l'historique dans le buffer)
     C-c C-k
          Pour revenir en mode *char*
M-x man
     Permet de lire les pages de manuel linux dans un buffer, voir aussi
     *Mx woman* qui est une version en lisp.
rdesktop
     Dans un shell, pour lancer une session RDP vers un serveur,
     commande type: ‚Äòrdesktop -uadminpdedieu -dAD-MAIRIE -g90% -r
     disk:linux=/tmp hdvcdad33‚Äô
ssh-agent
     Il est int√©ressant de d√©v√©rouiller et enregistrer sa clef SSH pour
     la dur√©e de la session, pour cela ajouter dans le *~/.profile*
     (attention cela bloque l'ouverture de la session X)
          eval $(ssh-agent -s)
          ssh-add
          trap 'kill $SSH_AGENT_PID' EXIT

* Menu:

* eshell::


File: emacs-documentation.info,  Node: eshell,  Up: Terminaux et Man

4.4.1 eshell
------------

Terminal elisp
   ‚Ä¢ intercepte certaines commandes comme *grep, find, dired, find-file*
     et cr√©e un buffer pour les r√©sultat
     dired *(Lk+5)
          ouvre un buffer dired des fichiers de + de 5 ko
     dired *(mw-7)
          devrait ouvrir un dired des fichiers modifi√©s depuis moins de
          7 jours mair retourne *invalid function 25549*
   ‚Ä¢ globing
     *(filter)
          globing avec un filtre (ou cumul de plusieurs parmis les
          suivants)
          .
               que les fichier
          /
               que les r√©pertoires
          L+50
               les fichiers de +de 50 octets
               Lk-500:: les fichiers de moins de 500 Ko
          ms-50
               les fichiers modifi√© depuis moins de 50 secondes
     C-c M-q
          aide concernant les predicates (dont tous les filtres)
     D√©finition de nouveaux predicates
          d√©finir une nouvelle fonction elisp 'mon-file-predicate ici
          avec un param *file* qui retourne true si on doit retenir le
          fichier et pour ajouter le predicat
               (add-hook 'eshell-pred-load-hook (lambda ())
                 (add-to-list 'eshell-predicate-alist
                 '(?U . 'mon-file-predicate)))
   ‚Ä¢ list modifier (aide par *C-c M-m*)
     "Hello"(:U)
          to Upper case
     echo *(:L)
          retourne la liste des noms de fichiers en minuscules
     echo ini*(:e:j/ | /)
          retourne une cha√Æne des extensions des fichiers commen√ßant par
          ini s√©par√©s par des ' | '
   ‚Ä¢ deux interpr√©teurs en m√™me temps: shell et elisp
   ‚Ä¢ definition de fonction elisp (defun XXX ())
        ‚Ä¢ Pour d√©finir des fonctions dans le mode shell (defun
          eshell/ma-fonc () ...)
        ‚Ä¢ Pour utiliser une fonction std masqu√©e par une perso avec
          *ma-fonc
        ‚Ä¢ Pour tester si une fonction a √©t√© pr√©fix√©e, voir
          ‚Äòcurrent-prefix-arg‚Äô
             ‚Ä¢ si pas pr√©fix√©e c'est nil
             ‚Ä¢ si une valeur num√©rique, c'est cette valeur
             ‚Ä¢ un simple C-u donne 4, C-u C-u donne 16
   ‚Ä¢ pipes ‚Äòcommand > #<buffer nom-buffer>‚Äô ou ‚Äò#<nom-buffer>‚Äô
        ‚Ä¢ id√©e de fonction bargs pour appliquer une fonction √† toutes
          les lignes d'un buffer
   ‚Ä¢ tramp
        ‚Ä¢ *(default-directory "ssh://root@serveur:/")*
        ‚Ä¢ Apr√®s quoi il est possible de faire un *dired* ou un
          *find-file* sur le serveur distant
   ‚Ä¢ Programmes non compatibles: ajouter √† la liste
     *'eshell-visual-commands* les noms des programmes comme *aptitude*
     ‚Äò(add-to-list 'eshell-visual-commands "aptitude")‚Äô
   ‚Ä¢ Boucle sur une recherche ‚Äòfor fic i in *.yml { bloc √† exec }‚Äô
   ‚Ä¢ Utiliser des parenth√®ses pour forcer le mode lisp


File: emacs-documentation.info,  Node: Serveur emacs,  Next: Scripts sur un serveur distant depuis emacs,  Prev: Terminaux et Man,  Up: Int√©gration OS

4.5 Serveur emacs
=================

   ‚Ä¢ Permet d'avoir un emacs qui tourne en arri√®re plan √† qui on envoi
     les fichiers qu'on veut ouvrir via *emacsclient*.
   ‚Ä¢ Cette edition peut √™tre ferm√©e par *c-x #* (rappel√© par un message)
   ‚Ä¢ ‚Äòalias ec='emacsclient -s moi'‚Äô dans ~ ‚Äò/bash_aliases‚Äô si le
     serveur a pour nom moi.
   ‚Ä¢ Un module gnome-shell permet de voir les serveurs d√©mar√©s et d'en
     d√©marrer un.


File: emacs-documentation.info,  Node: Scripts sur un serveur distant depuis emacs,  Next: EIN - Emacs IPython Notebook,  Prev: Serveur emacs,  Up: Int√©gration OS

4.6 Scripts sur un serveur distant depuis emacs
===============================================

Noter qu'on se sert de la clef SSH qui √©vite le MDP, et que le compte
root utilis√© doit utliiser bash (zsh ne se connecte pas)

* Menu:

* Examples::


File: emacs-documentation.info,  Node: Examples,  Up: Scripts sur un serveur distant depuis emacs

4.6.1 Examples
--------------

     df -h /


File: emacs-documentation.info,  Node: EIN - Emacs IPython Notebook,  Next: Navigateur web interne - eww,  Prev: Scripts sur un serveur distant depuis emacs,  Up: Int√©gration OS

4.7 EIN - Emacs IPython Notebook
================================

   ‚Ä¢ Voir un site (http://millejoh.github.io/emacs-ipython-notebook/)
     pour l'initiation


File: emacs-documentation.info,  Node: Navigateur web interne - eww,  Next: Gestion des mails mu4e - Messagerie Exchange,  Prev: EIN - Emacs IPython Notebook,  Up: Int√©gration OS

4.8 Navigateur web interne - eww
================================

M-x eww
     Promp pour URL ou mots clefs
l
     last page
p
     previous page
G
     re-saissie des mots clefs ou une URL
b
     ajoute un bookmark pour la page en cours
B
     Liste des bookmarks
q
     Quit


File: emacs-documentation.info,  Node: Gestion des mails mu4e - Messagerie Exchange,  Next: Gestion des mails notmuch - Free/GMail,  Prev: Navigateur web interne - eww,  Up: Int√©gration OS

4.9 Gestion des mails mu4e - Messagerie Exchange
================================================

* Menu:

* Accepter le certificat du serveur Exchange::
* Autre m√©thode pour accepter un certificat refus√©::
* M√©thode plus directe::
* R√©cup√©ration des mails avec offlineimap::
* Quelques raccourcis clavier::
* Filtre de recherche avec mu::


File: emacs-documentation.info,  Node: Accepter le certificat du serveur Exchange,  Next: Autre m√©thode pour accepter un certificat refus√©,  Up: Gestion des mails mu4e - Messagerie Exchange

4.9.1 Accepter le certificat du serveur Exchange
------------------------------------------------

   ‚Ä¢ Copier Wildcard.pem dans _usr/share/ca-certificates_
   ‚Ä¢ Rafraichir avec ‚Äòupdate-ca-certificates --fresh‚Äô


File: emacs-documentation.info,  Node: Autre m√©thode pour accepter un certificat refus√©,  Next: M√©thode plus directe,  Prev: Accepter le certificat du serveur Exchange,  Up: Gestion des mails mu4e - Messagerie Exchange

4.9.2 Autre m√©thode pour accepter un certificat refus√©
------------------------------------------------------

   ‚Ä¢ R√©cup√©rer le certificat √† probl√®me, par exemple via ‚Äòopenssl
     s_client -connect mail.rouen.fr:993 < /dev/null >/tmp/tout.txt‚Äô
   ‚Ä¢ On a alors le texte du certificat dans /tmp/tout.txt (entre autre)
   ‚Ä¢ Copier ce certificat par exemple dans /tmp/certif.pem
   ‚Ä¢ Obtenir sa signature sha256 via ‚Äòopenssl x509 -in /tmp/certif.pem
     -noout -sha256 -fingerprint‚Äô
   ‚Ä¢ Utiliser cet fingerprint dans une ligne de la conf de
     .offlineimaprc (section concernant le serveur distant)
     ‚Äòcert_fingerprint =
     A6:98:9C:2B:55:42:5F:F2:A1:09:E5:F0:74:8B:86:33:37:C5:ED:8E:71:49:57:2B:F4:BA:0E:F4:7A:9D:12:E5‚Äô
   ‚Ä¢ V√©rifier que le mot de passe user est bien √† jour (!)


File: emacs-documentation.info,  Node: M√©thode plus directe,  Next: R√©cup√©ration des mails avec offlineimap,  Prev: Autre m√©thode pour accepter un certificat refus√©,  Up: Gestion des mails mu4e - Messagerie Exchange

4.9.3 M√©thode plus directe
--------------------------

   ‚Ä¢ En cas de pb de signature, lancer ‚Äòoffilneimap‚Äô et trouver la
     signature effective dans le message d'erreur retourn√©


File: emacs-documentation.info,  Node: R√©cup√©ration des mails avec offlineimap,  Next: Quelques raccourcis clavier,  Prev: M√©thode plus directe,  Up: Gestion des mails mu4e - Messagerie Exchange

4.9.4 R√©cup√©ration des mails avec offlineimap
---------------------------------------------

   ‚Ä¢ installer le paquet *offlineimap*
   ‚Ä¢ le configurer dans un fichier *~/.offlineimaprc*
          [general]
          accounts = Rouen
          maxsyncaccounts = 3

          [Account Rouen]
          localrepository = LocalRouen
          remoterepository = RemoteRouen

          [Repository LocalRouen]
          type = Maildir
          localfolders = ~/Maildir/Rouen

          [Repository RemoteRouen]
          type = IMAP
          remotehost = mail.rouen.fr
          auth_mechanisms = PLAIN
          sslcacertfile = /etc/ssl/certs/ca-certificates.crt
          remoteuser = Pierre.DEDIEU@rouen.fr
          remotepass = ******
          ssl = yes
          maxconnections = 1

          [Account Admin]
          localrepository = LocalAdmin
          remoterepository = RemoteAdmin

          [Repository LocalAdmin]
          type = Maildir
          localfolders = ~/Maildir/Admin

          [Repository RemoteAdmin]
          type = IMAP
          remotehost = mail.rouen.fr
          auth_mechanisms = PLAIN
          sslcacertfile = /etc/ssl/certs/ca-certificates.crt
          remote_identity = admin@rouen.fr
          remoteuser = pdedieu@rouen.fr
          remotepass = ******
          ssl = yes
          maxconnections = 1

  1. Installation

        ‚Ä¢ Voir √† installer le paquet ubuntu *mu4e* (apt)
        ‚Ä¢ Pour travailler avec TB, il faut le passer le serveur en
          maildir et pas mbox (fait avec un nouveau profil via
          ‚Äòthunderbird -p‚Äô puis utilisation d'une extension TB pour
          r√©cup√©rer les contenus: *ImportExportTools*
        ‚Ä¢ Modifier le param√®tre avanc√© de TB: Menu / Pr√©f√©rences /
          r√©f√©rences / bouton Avanc√© changer le param√®tre
          *mail.store_conversion_enabled* √† *true*
        ‚Ä¢ Clic droit sur local folder / *Parm√®tres* Type de stockage,
          passer en maildir
        ‚Ä¢ Configurer le *~/.emacs.d/init.el* pour cela (maildir issus de
          TB) mais il faut r√©cup√©rer mon fichier init.el du Max
               ;; Lire mes mails de TB
               ;; (require 'org-mime)
               (add-to-list 'load-path "/usr/local/share/emacs/site-lisp/mu4e/")
               (require 'mu4e)
               (setq mu4e-maildir (expand-file-name "~/.thunderbird/s7i0rsjl.MailDir/"))
               (setq mu4e-maildir-shortcuts
                     '( ("/ImapMail/mail.rouen-1.fr/INBOX/cur"     . ?i)
                        ("/Mail/LocalFolders-maildir/Direction"   . ?d)
                        ("/drafts"   . ?b)
                        ("/ImapMail/mail.rouen-1.fr/sent"   . ?l)
                        ("/sent"      . ?s)))
               (add-to-list 'mu4e-bookmarks
                            (make-mu4e-bookmark
                             :name  "Gros messages"
                             :query "size:3M..500M"
                             :key ?g))
               (add-to-list 'mu4e-bookmarks
                            (make-mu4e-bookmark
                             :name  "Pierre Non Lus"
                             :query "not to:admin* and flag:unread"
                             :key ?p))
               (add-to-list 'mu4e-bookmarks
                            (make-mu4e-bookmark
                             :name  "Admin Non Lus"
                             :query "to:admin* and flag:unread"
                             :key ?a))
               (add-to-list 'mu4e-bookmarks
                            (make-mu4e-bookmark
                             :name  "MGO / JLE"
                             :query "from:Monique OR from:Jerome"
                             :key ?d))
                            (add-to-list 'mu4e-bookmarks
                                         (make-mu4e-bookmark
                                          :name  "Non lus -4 jours"
                                          :query "date:4d..today and flags:unread"
                                          :key ?d))

               (setq
                message-send-mail-function   'smtpmail-send-it
                user-mail-address "Pierre.DEDIEU@rouen.fr"
                smtpmail-default-smtp-server "mail.rouen.fr"
                smtpmail-smtp-server         "mail.rouen.fr"
                smtp-mail-service 587
                smtpmail-local-domain        "rouen.fr"
                smtmail-stream-type 'starttls
                starttls-use-gnutls t
                user-full-name  "Pierre DEDIEU"
                mu4e-compose-signature
                (concat
                 "Pierre DEDIEU\n"
                 "Mairie de Rouen\n"
                 "DSI - SOI - Infrastructures et Production\n"
                 "Responsable Production et Architecture\n"
                 "DSI - Production\n\n"
                 "T√©l√©phone: 02 35 08 86 37\n"
                 "Courriel: pdedieu@rouen.fr\n\n"
                 "Mairie de Rouen\n"
                 "Place du G√©n√©ral de Gaule\n"
                 "76037 ROUEN cedex 1\n\n"
                 "√âconomisez du papier, n'imprimez ce message que si n√©cessaire\n"
                 "Soyons √©cocitoyens!")
                mu4e-headers-fields '((:human-date . 12)
                 (:flags . 6)
                 (:from-or-to . 26)
                 (:size . 8)
                 (:subject)))
               ;; spell check
               (add-hook 'mu4e-compose-mode-hook
                         (defun my-do-compose-stuff ()
                           "My settings for message composition."
                           (set-fill-column 72)
                           (flyspell-mode)))
        ‚Ä¢ Configurer l'authentification sur le serveur Exchange
             ‚Ä¢ Utiliser SeaHorse (MDP, ubuntu graphique)
             ‚Ä¢ Se cr√©er une clef PGP /GPG moi pour MangeChats
             ‚Ä¢ lancer emacs en mode graphique pour que seahorse puise
               intercepter la demande de clef
             ‚Ä¢ saisir la passphrase dans seahorse en l'enregistrant
             ‚Ä¢ Se cr√©er dans emacs un fichier *~/.authinfo.gpg* avec
               comme contenu crypt√© ‚Äòmail.rouen.fr 587 Pierre.Dedieu
               MonMotDePasse‚Äô
             ‚Ä¢ Je m'ajoute un alias dans *~/.profile* soit ‚Äòmax='emacs
               ~/.emacs.d/init.el -f mu4e '‚Äô
             ‚Ä¢ Pour la correction avec flyspell-mode on peut utiliser
               *C-M-I* qui prend le premier choix et peut √™tre appel√©
               plusieurs fois pour les alternatives.  Il est aussi
               possible de choisir les possibilit√©s par num√©ro *M-$* ou
               *Escape-$*


File: emacs-documentation.info,  Node: Quelques raccourcis clavier,  Next: Filtre de recherche avec mu,  Prev: R√©cup√©ration des mails avec offlineimap,  Up: Gestion des mails mu4e - Messagerie Exchange

4.9.5 Quelques raccourcis clavier
---------------------------------

O
     Permet de changer le champ selon lequel est filtr√© la liste des msg
H
     Affiche l'aide info du module
W
     Bascule l'affichage des mails de la conversation ou seulement de
     ceux qui matchent
]
     Prochain message non lu (*[* pour pr√©c√©dent
n/p
     mail suivant / pr√©c√©dent
s
     saisie d'un filtre de recherche (*S* pour √©diter le courant)
/
     affiner la recherche actuelle (backslash pour revenir)
H
     affiche l'aide (info) sur le mode
r
     Refill (applique le d√©placement selon les r√®gles d√©finies pour le
     message)
e
     Dans un message, Extract l'une des PJ


File: emacs-documentation.info,  Node: Filtre de recherche avec mu,  Prev: Quelques raccourcis clavier,  Up: Gestion des mails mu4e - Messagerie Exchange

4.9.6 Filtre de recherche avec mu
---------------------------------

   ‚Ä¢ La documentation la plus compl√®te est dans *man mu-find*
   ‚Ä¢ Il faut taper *s* puis taper une query
   ‚Ä¢ *S* permet de modifier la requ√™te courante
   ‚Ä¢ Quelques exemples:
     from:dedieu date:today subject:Oracle not g:seen 'MotClef √†'
          penser √† entourer une s√©quence par des ' si il faut des
          espaces
     to:monnier and not flag:seen cron
          noter que le nom est incomplet et que si on utilise une * elle
          ne peux √™tre
          date:2y..1m size:1k..200m m:Procedures:: filtre par date et
          taille
          pour selectionner par dossier utiliser *jo* et taper quelques
          lettres du nom de dossier (incr√©mental).  Sinon voir que des
          regex peuvet √™tre pr√©cis√©es encadr√©es par des /.
          pour rechercher un tag c'est tag:XXX


File: emacs-documentation.info,  Node: Gestion des mails notmuch - Free/GMail,  Prev: Gestion des mails mu4e - Messagerie Exchange,  Up: Int√©gration OS

4.10 Gestion des mails notmuch - Free/GMail
===========================================

* Menu:

* Installation: Installation (1).
* Utilisation::


File: emacs-documentation.info,  Node: Installation (1),  Next: Utilisation,  Up: Gestion des mails notmuch - Free/GMail

4.10.1 Installation
-------------------

   ‚Ä¢ paquet offlineimap sous linux (dnf ou apt)
   ‚Ä¢ configuration dans ‚Äò~/.offlineimaprc‚Äô
          [general]
          accounts = MangeChats, Free

          [Account MangeChats]
          localrepository = Local
          remoterepository = Remote

          [Repository Local]
          type = GmailMaildir
          localfolders = ~/mail/Gmail

          [Repository Remote]
          type = Gmail
          remotehost = imap.gmail.com
          remoteuser = XXXXX@gmail.com
          remotepass = VotrePasswordDeGMail
          ssl = yes
          starttls = no
          sslcacertfile = /etc/ssl/certs/ca-certificates.crt
          # Voir https://console.cloud.google.com/apis/credentials?inv=1&invt=AbiUlQ&project=jovial-acronym-727 et d√©finir une application web
          #  avec comme URI de redirection https://oauth2.dance/
          oauth2_client_id = XXXXXX.googleusercontent.com
          oauth2_client_secret = XXXXXXXXX
          # Utiliser git clone https://github.com/google/gmail-oauth2-tools
          #  puis lancer
          #  python oauth2.py --generate_oauth2_token --client_id=XXXXXXXXXXX.apps.googleusercontent.com --client_secret=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
          #  passer le warning et copier le refresh_token obtenu
          oauth2_refresh_token = XXXXXXXXX

          [Account Free]
          localrepository = Local-Free
          remoterepository = Remote-Free

          [Repository Local-Free]
          type = Maildir
          localfolders = ~/mail/Free

          [Repository Remote-Free]
          type = IMAP
          remotehost = imap.free.fr
          remoteuser = XXXXXX@free.fr
          remotepass = XXXXXX
          ssl = yes
          starttls = no
          sslcacertfile = /etc/ssl/certs/ca-certificates.crt
   ‚Ä¢ lancer une premi√®re fois un ‚Äòofflineimap setup‚Äô
   ‚Ä¢ puis r√©cup de la boite en local par ‚Äòofflineimap new‚Äô
   ‚Ä¢ Installer le paquet notmuch sous linux (dnf ou apt)
   ‚Ä¢ L'installer aussi dans emacs (package-list-packages)
   ‚Ä¢ Installer le package ‚Äòbbdb‚Äô pour g√©rer la base des contacts
   ‚Ä¢ Se d√©finir un mot de passe d'application dans son compte Google
        ‚Ä¢ Dans Gmail cliquer en haut √† droite sur l'ic√¥ne du compte,
          puis sur *G√©rer votre compte Google*
        ‚Ä¢ Rechercher *app* pour avoir l'√©cran Mot de passe des
          application
        ‚Ä¢ Donner un nom d'application (emacs-mail ?)  puis bouton
          *Cr√©er*
        ‚Ä¢ Copier le mot de passe g√©n√©r√© par Google et le coller dans
          votre *~/.authinfo* ou plut√¥t *~/.authinfo.gpg*
        ‚Ä¢ la nouvelle ligne sera du type ‚Äòmachine smtp.gmail.com login
          MangeChats password blbablabla‚Äô
        ‚Ä¢ Attention il faut retirer les espaces du mot de passe fourni
          par Google
   ‚Ä¢ Configurer notmuch et l'envoi de mails dans default.el ou .emacs
          (setq mail-user-agent 'message-user-agent)
          (setq user-mail-address "MangeChats@gmail.com"
                user-full-name "Pierre DEDIEU")
          ;; smtp config
          (setq smtpmail-smtp-server "smtp.gmail.com"
                message-send-mail-function 'message-smtpmail-send-it)
          ;; report problems with the smtp server
          (setq smtpmail-debug-info t)
          ;; add Cc and Bcc headers to the message buffer
          (setq message-default-mail-headers "Cc: \nBcc: \n")
          ;; postponed message is put in the following draft directory
          (setq message-auto-save-directory "~/mail/draft")
          (setq message-kill-buffer-on-exit t)
          ;; change the directory to store the sent mail
          (setq message-directory "~/mail/")
          (defun notmuch-remove-deleted ()
            "Efface les messages tagg√©s deleted"
            (interactive)
            (shell-command "notmuch search --output=files tag:deleted | tr '\\n' '\\0' | xargs -0 -L 1 rm")
            (sleep-for 0.3)
            (notmuch-poll-and-refresh-this-buffer)
            )
          (defun notmuch-exec-offlineimap ()
              "execute offlineimap pour syncho mails locaux et serveurs"
              (interactive)
              (set-process-sentinel
               (start-process-shell-command "offlineimap"
                                            "*offlineimap*"
                                            "offlineimap -o")
               '(lambda (process event)
                  (notmuch-refresh-all-buffers)
                  (let ((w (get-buffer-window "*offlineimap*")))
                    (when w
                      (with-selected-window w (recenter (window-end)))))))
              (popwin:display-buffer "*offlineimap*"))
          (add-to-list 'popwin:special-display-config
                       '("*offlineimap*" :dedicated t :position bottom :stick t
                         :height 0.4 :noselect t))
          (defun notmuch-tag-large-mails (taille)
            "Contourne l'absence de notion de taille dans notmuch la taille en param√®tre"
            (interactive "nTaille max en Mega octets: ")
            (let ((cmd (format "for msg in $(
            for file in $(find ~/mail/ -type f -size +%sM);
              do
                grep -i ^Message-Id $file | sed -e \"s/^.*<\\(.*\\)>.*/\\1/\";
              done
              );
                do
                  notmuch tag +large id:$msg;
                done"
                               taille)))
              ;;(message cmd)
              (shell-command cmd)
              (notmuch-search "tag:large")
              (delete-other-windows)
            ))
          ;; Pour les envois:
          (setq user-mail-address "MangeChats@gmail.com"
                user-full-name "Pierre DEDIEU")
          (setq mail-user-agent 'message-user-agent)
          (setq message-send-mail-function 'smtpmail-send-it
                smtpmail-stream-type 'starttls
                smtpmail-smtp-server "smtp.gmail.com"
                smtpmail-smtp-service 587)


File: emacs-documentation.info,  Node: Utilisation,  Prev: Installation (1),  Up: Gestion des mails notmuch - Free/GMail

4.10.2 Utilisation
------------------

   ‚Ä¢ lancement par ‚Äònotmuch-hello‚Äô (ou d√©finir un raccourci clavier)
   ‚Ä¢ Tous les mails sont dans une seule base, et le principe est de
     faire des requ√™tes voir de positionner un pour plusieurs tags sur
     les messages, puis de cr√©er des queries (similaires √† des dossier
     virtuels)
   ‚Ä¢ Les derni√®res requ√™tes sont conserv√©es √† l'√©cran d'accueil et elles
     peuvent √™tre sauv√©es pour les prochaines sessions
   ‚Ä¢ les commandes sont (pense √† TAB pour completion)
   ‚Ä¢ s Search, saisie d'une query
     E
          Edit, modifier la requ√™te dont le r√©sultat est affich√©
     j
          Jump, lancer une query par d√©faut ou sauv√©e par l'utilisateur
          (choix dans une liste)
     o
          revert list Order
     Z
          tree view of current list
     l
          Limit, filtre la liste par une requ√™te compl√©mentaire
     +/-
          ajoute/retire un tag pour le mail courant ou la s√©lection
          (C-space)
     * +/-
          ajoute ou retire des tags aux mails de la liste en cours
     m
          √©crire un Mail
     r
          Reply (*R* rplay-all)
     q
          Quit, retour √† hello depuis une liste de r√©sultats¬≤
   ‚Ä¢ Mots clefs pour les recherches:
     from: / to:
          Exp√©diteur ou Destinataire
     date: start..send
          s√©lection entre start et end (et on peut omettre start ou
          end), qui peuvent s'√©crire
             ‚Ä¢ en absolu avec HH:MM ou MM/YYYY ou DD/MM/YYYY
             ‚Ä¢ en relatif avec *nnM* pour nn mois avant aujoud'hui,
               *nnd* pour nn jours, voir *two weeks*
     subject:
          suivi d'un mot ou d'une regex
             ‚Ä¢ ex: subject:/[qQ]antum/) le mot peut inclure *** sinon ce
               sera le mot complet
     body:
          idem pour le corps du mail
     tag:
          un des tags d√©finis par l'utilisateur ou par d√©faut
          (√©quivallent √† is: ?)
          tag:attachment
               pour s√©lectionner les mails ayant une pi√®ce jointe
     attachment:
          pour rechercher un mail avec une pi√®ce jointe dont le nom
          commence par (supporte aussi une regex avec ‚Äò/regex/‚Äô)
   ‚Ä¢ Joindre des crit√®res avec *and*, *or*, *not*
        ‚Ä¢ plus sp√©cifique *NEAR* ou *ADJ** entre deux mots pour que les
          2 soient √† moins de 10 mots
   ‚Ä¢ Exemples
     from:Dedieu and subject:internet
          mails de Pierre DEDIEU comme de pierre.dedieu, dont le sujet
          contient Internet ou internet ou INTERNET (les recherche sont
          case insensitives)
     from:dedieu and not from:pierre
          mails des Dedieu hormis Pierre
     from:dedieu and maison
          mails des Dedieu contenant maison (sujet, contenu ou autre)
     date: 3w..
          mails des trois derni√®res semaines
     folder:"_.*/Trash$_"
          ceux qui sont dans la poubelle de gmail
     date:10/2018..12/2018 and to:dedieu and from:dedieu
          re√ßu entre octobre et d√©cembre 2018 envoy√© par dedieu et √†
          destination de dedieu


File: emacs-documentation.info,  Node: Macros,  Next: Programmation et debug,  Prev: Int√©gration OS,  Up: Top

5 Macros
********

Enregistrer avec *F3* puis fin par *F4*, ex√©cution via *F4* avec pr√©fixe
par *C-u NN* ou *M-NN* pour r√©p√©ter une macro (peut √™tre appliqu√© pour
toute autre commande).  Fonction avanc√©es via *C-x C-k*, noter qu'on
peut appeler une des autres commande juste apr√®s sans retaper ce
pr√©fixe.
e
     pour √©diter la derni√®re macro en clair.
C-e
     pour √©diter une macro choisie par son binding ou son nom
n
     name last kbd macro
r
     region, applique une macro √† la r√©gion
l
     lossage, √©dition des 300 derni√®res frappes comme macro
b
     bind, pour associer √† une touche.
C-n/C-p
     next/previous, affichage des diff√©rentes macros ring.
   Apr√®s l'avoir renomm√©e, on peut ins√©rer le code lisp d'une macro dans
le fichier de conf via *M-x insert-kbd-macro* pour la retrouver lors de
prochaines sessions (*C-u M-x insert-kbd-macro* pour ins√©rer en plus
l'assignation de touches).

   L'alternative est *C-x (* pour commencer une macro et *C-x )* et *C-x
e* pour l'ex√©cuter.  *e* permet ensuite de r√©p√©ter la macro.  Il est
possible aussi de demander NN √©x√©cutions avec *C-u NN C-x e* ou *ESC NN
C-x e*.

   Noter qu'on peut utiliser un compteur pour ins√©rer une valeur qui
s'incr√©mente dans le contenu de la macro, au moment ou on doit placer la
valeur, taper *F3*.  Par d√©faut la valeur commence √† 0.

   *C-u NNN F3* pour que le compteur soit incr√©ment√© de NNN √† chaque
it√©ration.

   *M-x edit-last-kbd-macro* permet de voir/modifier la derni√®re macro.
Finir avec *C-c C-c*

   Il est possible d'ins√©rer le contenu d'une variable dans une macro en
utilisant ‚ÄòC-u M-: nom-variable‚Äô


File: emacs-documentation.info,  Node: Programmation et debug,  Next: org-mode,  Prev: Macros,  Up: Top

6 Programmation et debug
************************

* Menu:

* Debug de Bash::
* Debug de C et C++::
* Python::
* Perl::
* elpy pour les programmes python::
* java::
* eLISP::
* Buffer dired ouverts::
* SQL et CLI::
* TAGS::
* Folding::
* Docker::
* Puppet::
* Comparaisons::
* Suivi des versions de sources::


File: emacs-documentation.info,  Node: Debug de Bash,  Next: Debug de C et C++,  Up: Programmation et debug

6.1 Debug de Bash
=================

   ‚Ä¢ installer *bashdb* (apt-get ou rpm)
   ‚Ä¢ Installer via MELPA *realgud* pour disposer de *bashdb* dans emacs.
   ‚Ä¢ ajouter dans son *.emacs* une ligne *(require 'realgud)*
   ‚Ä¢ depuis un script shell, *M-x bashdb* lance le debug du script.  La
     position courante dans le script est affich√©e avec un triangle en
     d√©but de ligne.  Le source est en lecture seule sauf si on termine
     le debug (avec *k*)
   ‚Ä¢ On peut cliquer devant une ligne du src pour y d√©finir un
     breakpoint, un deuxi√®me clic l'enl√®ve (mais il y reste une trace
     persistante dans l'affichage: bug ?)
   ‚Ä¢ Les commandes disponibles incluent:
     n
          pour pas √† pas
     display nomvar
          pour afficher la variable nomvar (sans le $ final) lors de
          chaque arr√™t du debugger.
     c
          continue, pour ex√©cuter le script jusqu'au prochain breakpoint
          ou √† la fin
     R
          Restart, reprend le debug au d√©but du script
     b NN
          d√©finir un breakpoint √† la ligne NN (on peut pr√©ciser une
          condition pour ne s'arr√™ter que si elle est remplie).
     action NN comande
          ajoute une action (bash) √† ex√©cuter lors de chaque arr√™t du
          debugger.  ¬µPb je ne sais pas effacer une action sans quitter
          le debugger !
     pr $var
          Print de la valeur de $a.
     x $a
          eXamine, proche de print mais sait g√©rer des liste des
          fonctions ...
     L
          affiche breakpoints, watch, actions d√©finies
     info display
          affiche les displays d√©finis
     undisplay NN
          supprime un display


File: emacs-documentation.info,  Node: Debug de C et C++,  Next: Python,  Prev: Debug de Bash,  Up: Programmation et debug

6.2 Debug de C et C++
=====================

   ‚Ä¢ Penser √† compiler en debug , soit pour un seul fichier *M-x
     compile* en choisissant *gcc -g %*
   ‚Ä¢ Noter que pour se positionner sur la prochainee erreur de
     compilation on peut utiliser *M-g n*
   ‚Ä¢ Autre options de compilation utilis√©es
     -o nomprogramme
          pour forcer le nom du programme (sinon a.out)
     -WAll
          tous les warnings
   ‚Ä¢ En standard sur emacs, *M-x gdb*
   ‚Ä¢ *r* pour lancer le programme
   ‚Ä¢ *b main* pour mettre un point d'arr√™t au d√©but de la fonction
     main(), on peut aussi pr√©ciser le no de ligne.  On peut ajouter une
     condition en ajoutant *if condition*
   ‚Ä¢ condition bnum cond modifie la condition du breakpoint (voir *info
     b* pour connaitre les bnum)
   ‚Ä¢ *C-c C-c* pour l'interrompre
   ‚Ä¢ *display NomVar* pour afficher √† chaque arr√™t le contenu d'une
     variable (*p NomVar* l'affiche une seule fois).
   ‚Ä¢ le *clic* devant une ligne en C y place un point d'arr√™t, un
     nouveau l'enl√®ve.
   ‚Ä¢ le *Ctrl-clic* devant une ligne en C permet de d√©sactiver /
     r√©activer le point d'arr√™t.
   ‚Ä¢ *M-x speedbar* pour l'acc√®s direct aux fonctions et structures.
   ‚Ä¢ En GDB on y trouve l'affichage des watchs, qu'on cr√©e avec *C-x C-a
     C-w* (sur la variable, ou *C-u C-x C-a C-w* pour la saisir)

* Menu:

* Indentation et styles::


File: emacs-documentation.info,  Node: Indentation et styles,  Up: Debug de C et C++

6.2.1 Indentation et styles
---------------------------

Au del√† du programme externe *indent* qui est plus pram√©trale, dans un
source en c-mode
C-c .
     choisir le style d'indentation (TAB pour afficher les choix tels
     stroustrup, gnu, k&r, linux, bsd ...)
C-x h C-M-\
     S√©lectionne tout le buffer et formate avec le style courant.


File: emacs-documentation.info,  Node: Python,  Next: Perl,  Prev: Debug de C et C++,  Up: Programmation et debug

6.3 Python
==========

C-c C-z
     switch to python shell (si pas lanc√©, utiliser *C-c C-p*)
C-c C-c
     send current Buffer to python shell, donc execute le programme si
     on est dans le module principale.
C-c >
     indente la r√©gion s√©lectionn√©e
C-c <
     d√©sindente la r√©gion s√©lectionn√©e
M-.
     Recherche de la d√©finition d'une variable ou fonction
        ‚Ä¢ doit √™tre pr√©c√©d√© par une √©tape de g√©n√©ration des TAGS our le
          r√©pertoire et les sous-r√©pertoires concern√©s
               find . -type f -name '*.py' | xargs etags
        ‚Ä¢ pour un simple r√©pertoire, voir ‚ÄòM-x compile RET etags *.py‚Äô

     Voir *PyCharm* comme IDE Python

* Menu:

* Debug::
* Pony-mode::
* python-django::


File: emacs-documentation.info,  Node: Debug,  Next: Pony-mode,  Up: Python

6.3.1 Debug
-----------

   ‚Ä¢ Ajouter ‚Äòimport pdb; set_trace();‚Äô dans un code pour y placer un
     point d'arr√™t.  En python 3.7 mini on peut faire ‚Äòbreakpoint()‚Äô
        ‚Ä¢ Noter que si on d√©fini dans le programme ‚ÄòPYTHONBREAKPOINT=0‚Äô
          les appels √† breakpoint() sont ignor√©s
   ‚Ä¢ M-x pdb Permet de lancer le programme dans le debugger, ma s√©quence
     type est (dans la fen√™tre pdb):
     b N , condition
          ajouter un breakpoint confitionnel √† la ligne *N* (ou *b
          nom-module:N* pour autre fichier)
     b nom_fonction
          est une alternative pour arr√™ter √† l'entr√©e de la fonction, et
          la version compl√®te est ‚Äòb fichier.nom_fonction‚Äô
     r
          run pour lancer le programme jusqu'au retour de la fonction
          courante
     disable / enable bp
          pour d√©sactiver temporairement
     ignore bp NN
          le BP ne s'active qu'au bout de NN passage
     condition bp
          mettre une nouvelle condition au bp
     commands bp
          taper une liste de cmd pdb √† faire lors de l'arr√™t (finit par
          ‚Äòend‚Äô)
     c
          continue jusqu'au prochain bp
     p var
          affichage de la variable
     pp var
          pretty print affichage multiligne pour les dictionnaires ou
          autre structures
     whatis expression
          affiche le type de expression
     display expression
          affiche la valeur de l'expression √† chaque arr√™t (retirer avec
          ‚Äòundisplay exp‚Äô)
     l .
          affiche source autour du point
     a
          affichage des param√®tres de la fonction courante
   ‚Ä¢ customize rechercher *pdb* et remplacer si n√©cessaire *Gud pdb
     command name* par le chemin complet */usr/bin/pdb3*
   ‚Ä¢ pdb depuis le buffer source
     F10
          next, avance d'une ligne
     F11
          step, idem mais entre dans les sous programmes
     F5
          continue
     F12
          break
     clic sur 1i√®re colonne d'une ligne
          ajout d'un breakpoint
   ‚Ä¢ Alternative ‚Äòrealgud‚Äô et


File: emacs-documentation.info,  Node: Pony-mode,  Next: python-django,  Prev: Debug,  Up: Python

6.3.2 Pony-mode
---------------

   ‚Ä¢ installable via *package-list-package*, puis d√©finie un *pony-mode*
     √† tester pour lancer le serveur et plus.  Je note qu'il est dispo
     de base sur Spacemacs MAIS ne fonctionne pas sur mon PC:
        ‚Ä¢ Semble se faire en ouvrant le fichier settings.py, mais
          n'arrive pas √† retrouver le r√©pertoire racine du projet, ou le
          pythonpath... mes essais ont tous √©chou√©s.
        ‚Ä¢ n√©cessite de forcer l'interpr√©teur python √† /usr/bin/python3
        ‚Ä¢ n'arrive pas √† utiliser le .ponyrc pour sp√©cifier les infos du
          projet
   ‚Ä¢ La lecture de pony.el et la page d'un blog
     (https://marmalade-repo.org/packages/pony-mode) me donnent une
     piste pour comprendre l'√©chec du lancement du serveur par pony:
     malgr√© un customize qui pr√©cise d'utiliser python3... c'est
     toujours python 2.7.  Il semble que la cr√©ation d'un fichier
     *.ponyrc* dans le r√©pertoire root du projet, soit le r√©pertoire de
     manage.py, avec comme contenu:
          ;; Pony mode config for my project
          (make-pony-project
           :python "/usr/bin/python3")


File: emacs-documentation.info,  Node: python-django,  Prev: Pony-mode,  Up: Python

6.3.3 python-django
-------------------

   ‚Ä¢ Installer le package via *list-package* et MELPA.
   ‚Ä¢ Apr√®s installation, utiliser *python-django-open-project* que j'ai
     assign√© sur Tosh √† *C-c C-g*
   ‚Ä¢ cette fonction fait r√©f√©rence √† un *trouve.settings* qu'il faudrait
     d√©finir
   ‚Ä¢ De nombreux raccourcis dans la fen√™tre obtenue:
     crr
          pour lancer le serveur
     t
          pour reconstruire les tags (le fichier TAGS est √† la racine du
          projet)
     F10
          voir le menu puis *Django* pour rappeler qq raccourcis
   ‚Ä¢ voir la doc de retrouve
     (file:///home/pdedieu/Documents/Django/retrouve/django-documentation.org)


File: emacs-documentation.info,  Node: Perl,  Next: elpy pour les programmes python,  Prev: Python,  Up: Programmation et debug

6.4 Perl
========

M-x perldb
     lance le debugger sur le source perl du buffer en cours
     n
          next, ex√©cute une ligne et se place sur la suivante
     s
          step, ex√©cute une action √©l√©mentaire (entre si besoin dans une
          fonction)
     { commande
          d√©fini une commande √† lancer avant chaque retour au prompt
          (penser √† finir par ;)
     {{ commande
          ajoute une commande √† lancer avant chaque retour au prompt
     { ?
          affiche les action d√©finies
     { *
          efface les actions
     x var
          affiche le contenu d'un tableau ou d'un hash
     p var
          affiche une variable
     b N if (condition)
          pose un point d'arr√™t conditionnel √† la ligne N.


File: emacs-documentation.info,  Node: elpy pour les programmes python,  Next: java,  Prev: Perl,  Up: Programmation et debug

6.5 elpy pour les programmes python
===================================

* Menu:

* Installation: Installation (2).
* Utilisation: Utilisation (1).


File: emacs-documentation.info,  Node: Installation (2),  Next: Utilisation (1),  Up: elpy pour les programmes python

6.5.1 Installation
------------------

   ‚Ä¢ Voir le package elpy
   ‚Ä¢ Voir l'utilisation sur une page sur l'init
     (https://github.com/jorgenschaefer/elpy/wiki/Installation)
   ‚Ä¢ Voir pdf de documentation
     (https://media.readthedocs.org/pdf/elpy/latest/elpy.pdf) et
     peut-√™tre un survol
     (http://onthecode.com/post/78817537628/emacs-on-steroids-for-python-elpy-el)
     voir ‚Äòelpy-mode‚Äô.
   ‚Ä¢ ‚Äòelpy-config‚Äô permet de faire un point sur la config.  Il semble
     manquer un backend, rope par exemple via ‚Äòpip install --user rope‚Äô
   ‚Ä¢ l'IDE est surtout tatasse dans ses suggestions, comme celles
     concernant la longueur maxi des lignes (voir √† changer le param√®tre
     pour augmenter la limite ?).  Pour valider les modifs et voir les
     suggestions qui restent, surtout si des lignes ont √©t√© ajout√©es,
     sauver le fichier.


File: emacs-documentation.info,  Node: Utilisation (1),  Prev: Installation (2),  Up: elpy pour les programmes python

6.5.2 Utilisation
-----------------

C-c C-n
     se positionner sur la suggestion suivante
C-c C-p
     se positionner sur la suggestion pr√©c√©dente.
M-X ‚Äòelpy_mode‚Äô
     pour activer / d√©sactiver elpy
Esc-TAB
     completion auto de elpy
import
     elpy n'aime pas les ‚Äòimport *‚Äô il faut lister les objets qui sont
     utilis√©s (la compl√©tion y aide, elle propose les objets existants
     dans l'import).


File: emacs-documentation.info,  Node: java,  Next: eLISP,  Prev: elpy pour les programmes python,  Up: Programmation et debug

6.6 java
========

   ‚Ä¢ jde devenu jdee : pas trouv√© par ou le configurer
   ‚Ä¢ peut √™tre <https://github.com/iocanel/idee>
   ‚Ä¢ un package jetbrain bridge vers l'ide plus classique ??
   ‚Ä¢ une d√©mache appuy√©e sur eclipse !
     /java/2016/02/24/22-54-16-setting_up_emacs_for_java_development/
     (http://www.goldsborough.me/emacs)
   ‚Ä¢ emacs lsp-java ???
     <https://xpressrazor.wordpress.com/2020/11/04/java-programming-in-emacs/>


File: emacs-documentation.info,  Node: eLISP,  Next: Buffer dired ouverts,  Prev: java,  Up: Programmation et debug

6.7 eLISP
=========

Noter que pour common lisp les sp√©cificit√©s sont dans un fichier d√©di√©
(CommonLisp.org)
C-h-v
     pour afficher le contenu d'une variable
C-M-x
     pour ex√©cuter l'expression dans laquelle se trouve le point
M-:
     pour √©valuer l'expression tap√©e dans le minibuffer
C-x e
     Exec, permet d'ex√©cuter l'expression imm√©diatement avant le curseur
     (en particulier dans scratch).
C-j
     ins√©re en plus le retour dans le buffer (pas en std ?)
(interactive)
     dans une fonction *defun*, permet de la rendre accessible avec
     *M-x*
        ‚Ä¢ (message "Voici %d raisons d'√©crire du lisp %s" (+ 1 1)
          "WhiteHat")
        ‚Ä¢ Un message ainsi envoy√© appara√Æt dans la statusbar, mais on
          peut trouver l'historique des messages avec *C-h e* dont on
          peut sortir par *q*.
        ‚Ä¢ noter qu'on peut d√©finir des param√®tres avec prompt dans une
          string type ‚Äò(interactive "sServeur: \nsChemin: ")‚Äô
               (defun my-dired (srv chemin)
               "Essai d'ouverture d'un r√©pertoire distant avec adminpdedieu
                via tramp, yubikey et sudo"
               (interactive "sServeur: \nsChemin: ")
               (find-file
                (format "/ssh:adminpdedieu@%s.intranet.rouen.fr|sudo:%s.intranet.rouen.fr:%s"
                        srv
                        srv
                        chemin)))
C-M i
     Completion du mot commenc√© (variable, fonction ...)
C-u C-M x
     instrumenter la fonction autour du point, qui permet d'y mettre un
     point d'arr√™t via *b*.  l'appel de la fonction instrument√©e fait
     arr√™ter le debug √† son entr√©e.
        ‚Ä¢ Le debug peut se faire avec
          n ou SPC
               pour next,
          h
               here pour continuer jusqu'√† la s-ex du curseur
          b
               breakpoint, pour poser un breakpoint
          g
               go jusqu'au prochain breakpoint (*G* pour finir le debug)
          i
               into pour faire du pas √† pas dans la fonction en cours
          e
               eval
          d
               display backtrace
          ?
               aide
     Noter que j'ai pu planter emacs et *C-x e* retournait r√©guli√®rement
     *no inferior list process* (seul la sortie d'emacs a permis la
     correction)
paredit-mode
     un package optionnel, qui permet la saisie automatique de la
     deuxi√®me parenth√®se (voir Commmon-Lisp.org)
     C-M Space
          s√©lectionne la sexp courante
     C-M-e
          Se place √† la fin du defun courant (pratique avant C-x e pour
          la recompiler
     C-k
          efface jusqu'√† la fin de ligne, sauf si elle contient des fins
          d'expressions commenc√©es avant le point
     M-/
          complete le symbole commenc√©, y compris avec des noms d√©j√†
          pr√©sents dans le fichier
     Exemples de code
          (defun delta(a b c)
          "Retourne le discriminant de l'√©quation ax2+bx+c=0"
          (-
           (* b b)
           (* 4 a c)))

          (defun degre2(a b c)
            "Retourne les deux racines de l'√©quation ax2+bx+c=0"
            (let ((del (delta a b c))
                  (den (* 2 a)))
              (list
               (/ (+ (- b) (sqrt del)) den)
               (/ (+ b (sqrt del)) den))))

          (defun increment-number-at-point ()
            "incr√©mente l'entier sur lequel se trouve le curseur"
            (interactive)
            (skip-chars-backward "0-9")
            (or (looking-at "[0-9]+")
                (error "No number at point"))
            (replace-match (number-to-string (1+ (string-to-number (match-string 0))))))
          (global-set-key (kbd "C-c =") 'increment-number-at-point)

* Menu:

* Chargement de modules::
* Minor-mode::
* Major_mode::
* Major-mode bas√© sur un mode existant::
* Affichage des macros elisp::
* Fabrication d'epub::


File: emacs-documentation.info,  Node: Chargement de modules,  Next: Minor-mode,  Up: eLISP

6.7.1 Chargement de modules
---------------------------

   ‚Ä¢ La m√©thode de base est (load-file "chemin-complet-moodule.el") Cela
     pr√©sente les inconv√©nients
        ‚Ä¢ de ne pas autoriser √† d√©placer le source dans un autre
          r√©pertoire
        ‚Ä¢ de recharger le module m√™me s'il l'a d√©j√† √©t√© dans la session
          courante
   ‚Ä¢ Un alternative est ‚Äò(require 'nom-module)‚Äô
        ‚Ä¢ le syst√®me va d√©terminer le fichier nom-module.el√† utiliser en
          recherchant dans la liste *load-path*
        ‚Ä¢ pour des modules plac√©s en dehors des chemins par d√©faut il
          faut utiliser ‚Äò(add-to-list 'load-path
          "chemin-suppl√©mentaire")‚Äô et dans le cas ou c'est le
          r√©pertoire du module en cours je pr√©f√®re ‚Äò(add-to-list
          'load-path (file-name-directory (buffer-file-name)))‚Äô
        ‚Ä¢ cela n√©cessite de plus de mettre √† la derni√®re ligne du module
          required un ‚Äò(provide 'nom-module)‚Äô qui permet √† required de
          savoir que le module est d√©j√† charg√©


File: emacs-documentation.info,  Node: Minor-mode,  Next: Major_mode,  Prev: Chargement de modules,  Up: eLISP

6.7.2 Minor-mode
----------------

Voir Writing GNU Emacs Extensions Chap 7
   ‚Ä¢ D√©finir une variable locale au buffer *NOM-mode* ‚Äò(defvar-local
     NOM-mode)‚Äô
   ‚Ä¢ D√©finir une fonction pour entrer/sortir du mode
          (defun NOM-mode (&optional arg)
            "NOM minor mode"
            (interactive p)
            (setq NOM-mode
                  (if null arg
                    (not NOM-mode)
                    (> (prefix-numeric-value ar) 0))
            (if NOM-mode
                ; entr√©e dans le mod
                ; sortie du mode))
   ‚Ä¢ Ajouter une association √† la alist ‚Äòminor-mode-alist‚Äô pour d√©finir
     un indicateur √† afficher dans la modeline genre ‚Äò(NOM-mode . "
     NOM")‚Äô
          (if (not (assq 'NOM-mode minor-mode-alist))
              (setq minor-mode-alist
                    (cons '(NOM-mode " NOM")
                          minor-mode-alist)))


File: emacs-documentation.info,  Node: Major_mode,  Next: Major-mode bas√© sur un mode existant,  Prev: Minor-mode,  Up: eLISP

6.7.3 Major_mode
----------------

Voir Writing GNU Emacs Extensions Chap 9


File: emacs-documentation.info,  Node: Major-mode bas√© sur un mode existant,  Next: Affichage des macros elisp,  Prev: Major_mode,  Up: eLISP

6.7.4 Major-mode bas√© sur un mode existant
------------------------------------------

Utilisation d'un package d√©di√© pour une macro qui simplifie l'√©criture
du mode


File: emacs-documentation.info,  Node: Affichage des macros elisp,  Next: Fabrication d'epub,  Prev: Major-mode bas√© sur un mode existant,  Up: eLISP

6.7.5 Affichage des macros elisp
--------------------------------

   ‚Ä¢ Package √† installer: *macrostep*
   ‚Ä¢ fourni le minor-mode *macrostep-mode*
   ‚Ä¢ quand activ√©
     e
          expand, permet de remplacer la macro courante par sa valeur
     c
          collapse, pour revenir √† l'affichage normal
     q
          pour sortir de ce minor-mode (sinon read-only)
   ‚Ä¢ les macros elisp se d√©finissent avec ‚Äò(defmacro NOM ...)‚Äô


File: emacs-documentation.info,  Node: Fabrication d'epub,  Prev: Affichage des macros elisp,  Up: eLISP

6.7.6 Fabrication d'epub
------------------------

  1. Actuellement

     installer le package *ox-epub* et apr√®s un ‚Äò(require 'ox-epub)‚Äô le
     raccourci *C-c C-e* propose la conversion org en epub

  2. Historique

     Dans un premier temps des m√©thodes lisp m'ont √©t√© n√©cessaires
     (gard√©es pour assimiler elisp).  Maintenant j'ai trouv√© le package
     *ox-pandoc* qui me simplifie cela, avec la fonction
     *org-pandoc-export-to-epub3*

          (defun convert-md-2-epub ()
            "Convertion de markdown en epub avec pandoc pour le buffer courant"
            (interactive)
            (let* (
                   (debut (replace-regexp-in-string "\\..*" "" (buffer-file-name)))
                   (cmd (format "pandoc -f markdown -t epub -o %s.epub %s"
                                debut
                                (buffer-file-name))))
              (message "Yapluka lancer %s" cmd)
              (shell-command cmd)))

  3. Conversions via pandoc sur Apple (org en texte MS Office et epub)

          ;; Suite √† disparition export odt, interface √† pandoc ...
          (defun convert-org-to-docx ()
            "Converti le buffer courant en MS-Office Word"
            (interactive)
            (let* ((dest (replace-regexp-in-string "\.org$" ".docx" (buffer-file-name)))
               (cmd (format "pandoc -f org -t docx %s -o %s" (buffer-file-name) dest)))
              (shell-command cmd)
              (message cmd)))
          (defun convert-org-to-epub ()
            "Converti le buffer courant en epub"
            (interactive)
            (let* ((dest (replace-regexp-in-string "\.org$" ".epub" (buffer-file-name)))
               (cmd (format "pandoc -f org -t epub %s -o %s" (buffer-file-name) dest)))
              (shell-command cmd)
              (message cmd)))


File: emacs-documentation.info,  Node: Buffer dired ouverts,  Next: SQL et CLI,  Prev: eLISP,  Up: Programmation et debug

6.8 Buffer dired ouverts
========================

Voir assoc ‚Äòdired-buffer‚Äô pour une liste en elisp

* Menu:

* Buffer non associ√© √† un fichier::


File: emacs-documentation.info,  Node: Buffer non associ√© √† un fichier,  Up: Buffer dired ouverts

6.8.1 Buffer non associ√© √† un fichier
-------------------------------------


File: emacs-documentation.info,  Node: SQL et CLI,  Next: TAGS,  Prev: Buffer dired ouverts,  Up: Programmation et debug

6.9 SQL et CLI
==============

M-x sql-mysql
     Quand on √©dite un fichier SQL, pour pr√©cider le type de variante
     utilis√©e (interactif pour user, pwd, server)
C-c C-z
     fait apparaitre le buffer *SQL* associ√© avec les retours des
     commandes mysql
M-x toggle-truncate-line
     Pour √©viter les retours √† la ligne
C-c C-c
     Envoyer le paragraphe courant du buffer sql vers le prompt
C-c C-r
     idem pour la r√©gion s√©lectionn√©e
M-x sql-product-interactive
     pour un buffer dont le type SQL n'est pas correct
     En principe on peut corriger une ligne dans la table r√©sultat d'un
     select simple.  Mais comment valider la modification ??


File: emacs-documentation.info,  Node: TAGS,  Next: Folding,  Prev: SQL et CLI,  Up: Programmation et debug

6.10 TAGS
=========

Pour indexer et rechercher dans les sources d'un r√©pertoire
C-c T
     pour compiler tous les tags dans le r√©pertoire courant
M-.
     pour rechercher le mot sous le curseur
M-*
     pour revenir dans l'historique avant la derni√®re recherche de tag
M-x tag-search
     pour rechercher toutes la premi√®re occurrences d'une regexp
M-,
     permet de chercher la suivante
     ...+mail+reader+exchange&t=canonical&ia=qa


File: emacs-documentation.info,  Node: Folding,  Next: Docker,  Prev: TAGS,  Up: Programmation et debug

6.11 Folding
============

C-c @ C-M-h
     Hide All, plie tous les niveaux
C-c @ C-M-s
     Show All, d√©plie tous les niveaux
C-c @ C-c
     bascule, le niveau courant


File: emacs-documentation.info,  Node: Docker,  Next: Puppet,  Prev: Folding,  Up: Programmation et debug

6.12 Docker
===========

   ‚Ä¢ Pr√©-requis: *docker.io* sur la machine et user dans le groupe
     *docker*
   ‚Ä¢ Installer via MELPA le package *Docker*
   ‚Ä¢ Optionnellement ajouter *dockerfile-mode* qui autorise le build via
     *C-c C-b* (depuis le fichier dockerfile, mais il faut passer en
     *dockerfile-mode* avant.
   ‚Ä¢ M-x docker-images liste les images disponibles sur le syst√®me.  Des
     commandes via une touche sont disponibles pour l'image
     s√©lectionn√©e, puis *R* lance le run:
     h
          Aide sur le mode avec la liste des commandes
     R
          Run popup, permet de lancer un container avec aide √† la saisie
          des param√®tres de *docker run*, les commandes disponibles
          incluent (un historique est dispo avec haut/bas):
          =m
               pour pr√©ciser le nom de l'image
          -d
               pour detach
          =e
               pour ajouter des variables d'environnement comme
               ‚ÄòCONFIGFILE=configTEST.py‚Äô
          =p
               pour ports, par exemple 8080:80
     D
          Delete, pour effacement d'une image via pop-up
     C-x C-s
          permet de sauver les options du run
   ‚Ä¢ M-x docker-containers liste les containers, avec commandes via une
     touche, ma s√©lection:
     I
          Inspect popup, puis *C* pour afficher la commande compl√®te du
          run
     L
          Log, voir les logs du container
     O
          stOp, arr√™t du container
     S
          Start, lancer le container (qui doit √™tre stopp√©)
     b
          Shell sur l'image
     C
          Copy, choix entre *F* from et *T* to pour copie de fichier ou
          r√©pertoire d'un container vers localhost ou r√©ciproquement.
     D
          Delete, pour supprimer un container (-f possible si il est up)
     f
          file, ouvre un dired sur les fichier du container, un return
          et on peut les voir et m√™me modifier en live (penser si OK √†
          copier les fichiers modifier dans les sources d'origine).
     R
          Restart du container


File: emacs-documentation.info,  Node: Puppet,  Next: Comparaisons,  Prev: Docker,  Up: Programmation et debug

6.13 Puppet
===========

   ‚Ä¢ il existe un *puppet-mode* dispo sur le d√©p√¥t melpa optionnel
   ‚Ä¢ une fois activ√©, il permet
        ‚Ä¢ la coloration syntaxique et l'indentation auto (2 espaces)
        ‚Ä¢ C-c C-a alignement des => pour la s√©lection
        ‚Ä¢ C-M-a / e le d√©placement sur la ressource p√©c√©dente / suivante
        ‚Ä¢ C-c C-l v√©rification de syntaxe par puppet-lint (installer via
          ‚Äòapt install puppet-linl‚Äô


File: emacs-documentation.info,  Node: Comparaisons,  Next: Suivi des versions de sources,  Prev: Puppet,  Up: Programmation et debug

6.14 Comparaisons
=================

M-x ediff
     Apr√®s saisie des deux noms de fichiers, on a deux buffers et une
     petite fen√™tre de commande.
     |
          pipe, permet d'afficher les deux buffers verticalement
          (bascule)
     n
          permet de se place sur la prochaine diff√©rence (*p* la
          pr√©c√©dente)
     a
          copie la diff√©rence de A vers B
     b
          copie la diff√©rence de B vers A
     v et V
          scroll les deux buffers (vers le bas / haut)
     < et >
          scroll les deux buffers (vers la gauche / droite)
C-x sd
     permet d'afficher les diff√©rences des buffers ouverts avec leurs
     fichiers (puis de choisir de les sauvegarder ou pas)
M-x ediff-compare-directories
     Lance une comparaison de deux r√©pertoires, taper ensuite *D* pour
     afficher les diff√©rences, voir copier les fichiers qui seraient
     d'un seul c√¥t√© via *C* (demande une confirmation).
M-x ediff-current-file
     Pour comparer le buffer courant avec son fichier (avant de sauver,
     quelles sont les diff√©rences ?)


File: emacs-documentation.info,  Node: Suivi des versions de sources,  Prev: Comparaisons,  Up: Programmation et debug

6.15 Suivi des versions de sources
==================================

* Menu:

* Int√©gration dans emacs::
* magit::
* Pr√©paration du projet sur git::
* emacs et WikiJS::


File: emacs-documentation.info,  Node: Int√©gration dans emacs,  Next: magit,  Up: Suivi des versions de sources

6.15.1 Int√©gration dans emacs
-----------------------------

Suivi des modification du fichier en cours (bzr par exemple ... mais
marche avec git)
C-x vv
     Next action de Version Control (enreg new file, new version ...)
C-x vl
     Log de Version Control pour un fichier
     =
          Pour voir les diff√©rences amen√©e par cette version
     n p
          next/previous message
     < >
          d√©but/fin du buffer
     g
          revert buffer (rafra√Æchi son √©tat)
     e
          edit change comment
     q
          quit
C-x vd
     Version Control pour un r√©pertoire (edited/registered ...)
     L
          log de toutes les modifs.  Pour chaque ligne *=* permet de
          voir les modifs du fichier concern√©
     Return
          pour afficher le fichier
     o
          Visit file in other window
     v
          pour next-action sur la ligne courante (ou les s√©lections)
     =
          pour afficher ce qui a chang√© sur un fichier (edited !)
          n
               pour se placer sur la prochaine diff√©rence
          p
               pour se placer sur la pr√©c√©dente diff√©rence
     l
          log (voir les diff√©rent logs du fichier)
     m
          Mark pour s√©lectionner un fichier (M tous les fichiers dans le
          m√™me √©tat que le courant)
     u
          Unmark pour d√©-s√©lectionner le fichier (U pour tous les
          fichiers dans le m√™me √©tat que le courant)
     P
          Push, mais √©choue si on n'a pas stock√© dans la config du
          r√©pertoire courant de git le username/password.  Soit dans le
          fichier .git/config
               [remote "origin"]
               url = http://pdedieu:XXXXXXX@hdvgen15.intranet.rouen.fr/pdedieu/IKV.git
     q
          pour sortir de vc-dir
M-x vc-version-diff
     diff√©rences entre deux r√©visions pour un fichier (voir si
     int√©ressant par rapport √† *l -*)
Pour utiliser ediff comme mergetool
     le choix n'existe pas sauf √† ajouter dans *~/.gitconfig*
          [mergetool "ediff"]
          cmd = emacs --eval "(ediff-merge-files-with-ancestor \"$LOCAL\" \"$REMOTE\" \"$BASE\" nil \"$MERGED\")"
     et il est alors possible d'utiliser *git mergetool -t ediff FILE*
     Suggestions de config Git:
          git config --global pull.rebase true
          git config --global fetch.prune true
          git config --global diff.colorMoved zebra


File: emacs-documentation.info,  Node: magit,  Next: Pr√©paration du projet sur git,  Prev: Int√©gration dans emacs,  Up: Suivi des versions de sources

6.15.2 magit
------------

   ‚Ä¢ Installation via ‚Äòpackage-list-packages‚Äô
   ‚Ä¢ commande initial ‚Äòmagit-status‚Äô (C-x g)
        ‚Ä¢ si le r√©pertoire n'est pas encore un projet git (pas de
          sous-dossier .git)
             ‚Ä¢ propose de le cr√©er
             ‚Ä¢ pour ajouter le remote gitlab.rouen.fr utiliser *Ma* chez
               nous le nommer *rouen* et donner l'URL du projet
               PREALABLEMENT cr√©√© dans giltab (sans Readme par d√©faut
               svp, le cr√©er dans notre rep local si besoin)
             ‚Ä¢ propose d'en faire le remote.pushDefault par d√©faut:
               bonne id√©e
   ‚Ä¢ Commencer par d√©finir une nouvelle branche pour y inclure les
     modifications envisag√©es (en g√©n√©rale bas√©e sur dev)
   ‚Ä¢ Une fois valid√©es les modifications, les merger avec la branche
     d'origine.  Pour cela se placer sur la destination et merger la
     branche plus avanc√©e
   ‚Ä¢ Commandes:
     g
          refresh
     ?
          aide sur les commandes disponibles (contextuelle)
     TAB
          pour √©tendre/reduire la section courante
     bl
          pour se placer sur une autre branche locale
     bc
          pour cr√©er une nouvelle branche et faire un checkout
     lL
          graphe des branches locales
     l -
          Voir les modifications d'un fichier particulier du projet
          (apr√®s *-* le nom du fichier est demand√©, saisie avec auto
          completion)
     s
          Stage, pour ajouter les modifications d'un fichier existant au
          prochaine commit.  Noter que si utilis√© dans la section
          *Untracked files*, cela permet d'ajouter un fichier ou un
          r√©pertoire au GIT lors du prochain commit.  Il est aussi
          possible de ne *stager qu'une partie des modifications* d'un
          fichier (selectionner via ‚ÄòC-SPACE‚Äô et fl√®ches dans la liste
          des modifications, avant d'utiliser ‚Äòs‚Äô)
     zz
          Creation d'un stash, qui permet de mettre en boite les modifs
          unstaged.  N√©cessaire si on veut changer de branche avec des
          modifs en attente de commit
     cc
          Commit (pousse les modifications staged sur le d√©p local pour
          la branche courante)
     M a
          ajouter un remote (demande un nom et une URL
     Pu
          Push de la branche locale vers le GIT distant (pour Rouen,
          ouvrir le VPN avant)
     !!
          lance une commande git depuis un prompt (si raccourci pas
          connu par exemple)
     : ls-files
          affiche tous les fichiers track√© par le projet en cours
   ‚Ä¢ La section *unmerged into* liste des modifications disponibles dans
     le d√©p√¥t local et pas sur un distant (il manque un push pour
     r√©gulariser)
        ‚Ä¢ Voir comment est d√©termin√© le remote sur lequel on alerte
          (quand il y en a deux je ne maitrise pas lequel est notifi√©)


File: emacs-documentation.info,  Node: Pr√©paration du projet sur git,  Next: emacs et WikiJS,  Prev: magit,  Up: Suivi des versions de sources

6.15.3 Pr√©paration du projet sur git
------------------------------------

Issu de la doc IKV
   ‚Ä¢ Il faut installer le paquet git.
   ‚Ä¢ Avant de d√©finir un d√©pot, il vous faut d√©finir un *utilisateur*,
     soit ‚Äògit config --global user.name "Pierre DEDIEU"‚Äô et ‚Äògit config
     --global user.email pdedieu@rouen.fr‚Äô
   ‚Ä¢ Se placer dans le r√©pertoire de l'application √† pousser
   ‚Ä¢ Optionnellement, cr√©er un fichier ‚Äò.gitignore‚Äô avec les noms des
     fichiers √† ignorer (... avec des commentaires commen√ßant par #).
          *~
          \#*\*
          *.texi
     En fait il existe aussi un *.git/info/exclude* qui semble avoir ce
     but et est cr√©√© par le ‚Äògit init‚Äô.
   ‚Ä¢ *Cr√©er le d√©p√¥t* git local via ‚Äògit init‚Äô
   ‚Ä¢ Pour ajouter tout *l'ensemble du r√©pertoire* courant dans le d√©p√¥t
     local: ‚Äògit add .‚Äô (.  peut √™tre remplac√© par le nom d'un fichier)
   ‚Ä¢ Par d√©faut cela cr√©e une seule branche *master*
   ‚Ä¢ Il peut √™tre int√©ressant de mettre en place deux branches, pour moi
     *develop* via ‚Äògit checkout -b develop‚Äô
   ‚Ä¢ Le *passage d'une branche √† l'autre* se fait via ‚Äògit checkout
     nombranche‚Äô
   ‚Ä¢ Pour incorporer les modifs de la branche dev dans la branche
     master, se placer dans la branche master (‚Äòcheckout master‚Äô) et
     incorporer les modifs avec ‚Äògit merge develop --no-ff‚Äô voir man
     git-merge.
   ‚Ä¢ Pour pousser le git local *sur un serveur
        ‚Ä¢ dans le cas du d√©p√¥t GitLab de la mairie (cr√©er le projet IKV
          sur l'interface web avant)
             ‚Ä¢ D√©finir la destination par ‚Äògit remote add origin
               http://hdvgen15.intranet.rouen.fr/pdedieu/IKV.git‚Äô
             ‚Ä¢ Envoyer le contenu de prod par ‚Äògit push origin master‚Äô
               (en √©tant en checkout master)
             ‚Ä¢ Envoyer le contenu de dev par ‚Äògit push origin develop‚Äô
               (en √©tant en checkout develop)
        ‚Ä¢ dans le cas du git sur synology du r√©seau local
             ‚Ä¢ D√©finir le d√©p√¥t en ligne de commande via ‚Äòssh -p 2226
               pdedieu@192.168.1.38‚Äô
                    mkdir -p ~/git/mon-projet
                    cd ~/mon-projet
                    git init --bare --shared ./mon-projet.git
                    git branch -m main # ou pas, sion c'est master ?
             ‚Ä¢ dans le r√©pertoire du PC de dev
                    git init
                    git branch -m main # ou pas
                    git remote add origin ssh://pdedieu@192.168.1.38:2226/~/git/mon-projet/
   ‚Ä¢ Pour r√©cup√©rer le contenu du git sur une *autre machine*, faire
     dans un r√©pertoire vide (pas trouv√© comment √©viter que ce
     r√©pertoire contienne le sous r√©pertoire IKV du projet, √† d√©faut je
     d√©place le r√©pertoire apr√®s coup) ‚Äògit clone
     http://hdvgen15.intranet.rouen.fr/pdedieu/IKV.git‚Äô
   ‚Ä¢ Depuis une machine pour MAJ la branch courante avec un des contenus
     distants, ‚Äògit pull origin master‚Äô
   ‚Ä¢ Apr√®s une s√©rie de modifs sur le git local en dev, pour les d√©poser
     sur le serveur (si branche dev s√©lectionn√©e en local) ‚Äògit push
     origin develop‚Äô
   ‚Ä¢ Pour enregistrer les modifications du r√©pertoire dans le git ‚Äògit
     commit -m "ma description" -a‚Äô.  Si c'est d'un seul fichier,
     remplacer -a par le nom du fichier.  Dans le cas d'emacs apr√®s
     sauvegarde, *C-x vv* fait le commit du fichier, avec saisie du
     message dans un buffer dynamique (valid√© par *C-c C-c*.)
   ‚Ä¢ Pour travailler avec de multiples branch, s'inspirer des
     explications de ce site
     (https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging)
        ‚Ä¢ git peut afficher l'√©tat des diff√©rentes branches du projet et
          les commits: ‚Äògit log --all --decorate --oneline --graph‚Äô
   ‚Ä¢ Deux branches sont utilis√©es: master pour la prod et develop pour
     les version pre-prod.
        ‚Ä¢ pour supprimer les branches mortes distantes list√©es par ‚Äògit
          branch -r‚Äô
             ‚Ä¢ ‚Äògit push origin :dev‚Äô pour supprimer dev mais semble
               sans effet
             ‚Ä¢ ‚Äògit fetch --all --prune‚Äô suffirait √† lui seul et a
               supprim√© deux branches
   ‚Ä¢ En g√©n√©ral je pr√©f√®re nettement faire les actions locales dans
     *note magit:: depuis emacs


File: emacs-documentation.info,  Node: emacs et WikiJS,  Prev: Pr√©paration du projet sur git,  Up: Suivi des versions de sources

6.15.4 emacs et WikiJS
----------------------

   ‚Ä¢ modifier les fichiers du d√©p√¥t local /home/pdedieu/wiki/data/repo
     avec le user *wiki*
   ‚Ä¢ En cas de conflit entre les version locales et gitlab, emacs est en
     mode *smerge* et des raccourcis int√©ressants sont pr√©vix√©s par
     *C-c^*
     n
          diff√©rence suivante
     p
          diff√©rence pr√©c√©dente
     RETURN
          valide la version sur laquelle se trouve le curseur
   ‚Ä¢ il est alors possible de sauver une version sans conflit et de
     suivre les conseils fournis par *git status* (commandes git
     manuelles multiples !)
   ‚Ä¢ Ces manipulations sont complexes et militent en faveur d'une
     √©dition sur le container en web !!


File: emacs-documentation.info,  Node: org-mode,  Next: Tramp,  Prev: Programmation et debug,  Up: Top

7 org-mode
**********

* Menu:

* Notes::
* Insertion de lien::
* Navigation dans les titres::
* Saisies agenda::
* Affichage des agendas::
* Chronom√©trage::
* org-roam::
* org-capture::
* Tableaux::
* Pr√©sentation reveal.js: Pr√©sentation revealjs.
* Pour aller plus loin::
* Org-babel et inclusion de sources::
* Inclusion de requ√™tes mysql::
* Inclusion de code SQLite::
* Inclusion de diagrammes Ditaa::
* Inclusion de sh√©mas UML::
* Exportation::
* Formules math√©matiques::
* Inclure des diagrammes::
* Produire un export Word avec un template::


File: emacs-documentation.info,  Node: Notes,  Next: Insertion de lien,  Up: org-mode

7.1 Notes
=========

Voir *C-h i* puis *m* org(1) pour lire info sur org-mode(2) ou un
article de LJ(3). Pour ins√©rer des notes voir (4)
M-m
     place le curseur au premier caract√®re hors indentation
C-c C-t
     pour circuler entre les modes d'un titre (Normal - Todo - Done...)
C-c C-q
     sur un *titre*, permet de lui assigner des TAGS, par exemple le
     responsable de l'action
C-c / r
     Retourne le buffer avec mise en √©vidence d'une regexp (qu'on
     parcours par *M-g n* ou *p*)
C-c C-c
        ‚Ä¢ Sur une case √† cocher, permet de cocher/d√©cocher
        ‚Ä¢ Sur un titre c'est aussi les TAGS
C-u C-c C-c
     Tansforme un item de liste en ajoutant une case √† cocher (bascule)
Enrichissements
     Entourer des mots par des caract√®res / * _ ~ + les affiche
     respectivement _italics_ *bold* underline ‚Äòverbatim‚Äô strike-through
     Pour les cacher lors de l'√©diton, penser √†: ‚Äò(setq
     org-hide-emphasis-markers t)‚Äô sachant que la valeur par d√©faut est
     ‚Äònil‚Äô mais le changement n'est pris en compte qu'√† la relecture du
     buffer (revert-buffer par exemple).  Verbatim permet d'afficher les
     caract√®res d'enrichissement au lieu de les interpr√©ter.
Affichage des Titre avec Bullets
        ‚Ä¢ Installer le package *org-bullets*
        ‚Ä¢ Ajouter dans *init.el*
               (use-package org-bullets
                 :config
                 (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1))))
Tab
     pour d√©velopper / compacter un sous arbre
Shift-Tab
     idem mais pour tous les titres
Shift-droite/gauche
     Sur un titre change √©tat TODO, sur un item de liste permet
     num√©rotation...
Esc-Ret
     ins√®re un item de m√™me niveau que le courant... ou une d√©finition
     (idem *Alt-* Ret*)
Esc-Up
     d√©cale un item vers le haut (*Down* vers le bas)
Esc-Right
     indente d'un niveau (*Left* d√©sindente) - La r√©gion si s√©lection
     existe
C-c C-n
     Titre suivant
C-c C-p
     Titre pr√©c√©dent
C-j
     Passe √† la ligne suivante en maintenant l'indentation pr√©c√©dente.
        ‚Ä¢ Noter qu'une ligne commen√ßant par un *tiret* est une liste, et
          qu'un espace entour√© de crochets carr√©s est une case √† cocher:
          ‚Äò[ ]‚Äô.
        ‚Ä¢ On peut la cocher / d√©cocher via *C-c C-c*.
        ‚Ä¢ On peut ins√©rer une nouvelle entr√©e de checkbox avec *S-M
          Return*
        ‚Ä¢ Un *%* plac√© entre crochets remplac√© par le pourcentage
          d'avancement des cases √† cocher: ‚Äò[%]‚Äô.  Si c'est un ‚Äò[/]‚Äô
          c'est la fraction

          Noter que si on veut une liste num√©rot√©e, commencer par ‚Äò1.‚Äô
          et la num√©rotation se mettra √† jour toute seule (de m√™me en
          ins√©rant des lignes...mais pas en en supprimant).
C-c -
     Sur une ligne de liste, fait changer le type de liste
     successivement - + 1.  1)
C-c x f
     pour ins√©rer une note de bas de page (footnote).  Noter le retour
     apr√®s saisie via *C-c &*
M-q
     formate le paragraphe selon auto-fill (largeur d√©finie par *C-x
     f*).  Raccourci alternatif: *Esc-q*
M-%
     remplace une cha√Æne par une autre avec confirmation.  Avec *C-u* ce
     sont des regexp.  Si on ne veut pas de confirmation il faut *M-x
     replace-string*.
C-M-%
     remplace une regexp, en interactif (avec confirmation pour chaque
     ou tous ...).  Exemple ‚Äò\(\w+\(_\w+\)+\)‚Äô par ‚Äò~*\1*~‚Äô
M-x replace-regexp
     pour le faire sans aucune confirmation entoure tous mots contenant
     des *_* avec des ***
     y
          remplace la premi√®re occurence et se place sur la suivante
     ,
          remplace la premi√®re occurence et reste sur place pour voir
     !
          remplace toutes les occurences restantes
     ?
          affiche et documente toutes les commandes possibles
<e TAB
     insertion d'un bloc pr√©format√©, donc pas interpr√©t√© par org Ceci a
     disparu de org 9.2, si pas d√©tect√© essayer *C-c C-,* puis *e* ou
     *s* pire ensuite qui oblige √† utiliser *M-x
     org-insert-structure-template*
<s TAB
     template pour ins√©rer une s√©quence de source dans le texte (pr√©voir
     de pr√©ciser le langage √† la fin de la ligne initiale g√©n√©r√©e).  Du
     type #+BEGIN_SRC. C'est la notion plus g√©n√©rale de squelette...
     voir l'aide via *C-h v org-structure-template-alist*
     Noter qu'on peut choisir d'ajouter ce qui est export√© en source,
     et/ou en r√©sultat avec le mot clef *:exports* suivi d'un *results*
     ou *both*.  On peut aussi utiliser *:file* pour sp√©cifier un
     fichier de sortie.  Il est aussi possible de contr√¥ler le r√©sultat
     export√©
     :result output
          affiche la sortie standard (celle des print ou des echo)
     :result scalar
          affiche la valeur de retour du script

     Par d√©faut une confirmation est demand√©e avant ex√©cution, sauf si
     on ajoute soit (doc org
     (https://orgmode.org/manual/Evaluating-Code-Blocks.html#index-eval_002c-header-argument)
     et doc readthedocs
     (https://org-babel.readthedocs.io/en/latest/header-args/?q=%3Aeval&check_keywords=yes&area=default#eval))
org-confirm-babel-evaluate
     est *nil*
:eval yes
     dans la ligne du begin (en fait, pris en compte que si
     org-confirm-babel-evaluate est nil !  mais c'est alors la valeur
     par d√©faut.  On peut au contraire ajouter un *eval: query* pour un
     bloc plus dangeureux)
#+PROPERTY: :eval query
     au d√©but du fichier, √©ventuellement √† valider par un *C-c C-c* (ne
     marche pas, √† creuser)

     Plac√© dans un tel bloc de code, *C-c C-c* affiche le r√©sultat dans
     un bloc RESULT.  Mais il faut une section dans le .emacs du type
     (on peut aussi mettre nil au lieu de t pour d√©sactiver un langage)
          ;; active Babel languages
          (org-babel-do-load-languages
           'org-babel-load-languages
           '((shell . t)
             (python . t)
             (sqlite . t)
             (emacs-lisp . t)
             ))

C-c $
     archive le sous arbre courant (le d√©place dans le fichier
     d'archive, cr√©√© s'il n'existe pas).

   ---------- Footnotes ----------

   (1) La vrai documentation est √† trouver via google ??

   (2) Ce sujet m√©riterait un fichier d√©di√© ... voir pour le cr√©er plus
tard ?

   (3) Si on veut relire une description en anglais: 2
(http://www.linuxjournal.com/article/9116?page=0)
<http://emacsclub.github.io/html/org_tutorial.html>

   (4) Le bas de page n'est pas toujours ce qu'on voudrait, Mais voir
*C-c C-x f* dans cette m√™me doc.


File: emacs-documentation.info,  Node: Insertion de lien,  Next: Navigation dans les titres,  Prev: Notes,  Up: org-mode

7.2 Insertion de lien
=====================

C-c C-l
     ins√®re un lien vers une URL ou un fichier, commencer par *file:* et
     finir par
     ::ligne
          num√©ro de la ligne dans le fichier (pour le fichier courant
          F:::ligne ou )
     ::/regex/
          positionn√© sur la premi√®re occurrence de l'expression
          r√©guli√®re (avec la liste des matchs).  Exemple avec ceci
          (file:///home/pdedieu/CloudStation/Org/TODO-sur-portable.org).
          Si l'expression est trouv√©e en plusieurs endroits il sont tous
          affich√©s en surlign√©s.  On passe alors d'un match √† l'autre
          via *M-g n* ou *M-g p* (next/previous)
C-c C-o
     ouvre un tel lien (dans un autre buffer)
C-c l
     enregistre la position actuelle dans un fichier pour l'utiliser
     dans un prochain lien.  Lors de la saisie de l'URL, utiliser
     *fl√®che haut* pour le r√©cup√©rer.  Noter que dans les derni√®res
     versions le raccourci ne fonctionne plus mais on peut appeler la
     fonction *org-store-link*
C-u C-c C-l
     ins√®re un lien vers un fichier (permet d'utiliser l'autocompl√©tion)
     Noter aussi que c'est √©quivalent √† *C-c C-l file Enter*


File: emacs-documentation.info,  Node: Navigation dans les titres,  Next: Saisies agenda,  Prev: Insertion de lien,  Up: org-mode

7.3 Navigation dans les titres
==============================

C-c C-n
     Next, prochain titre (*p* pour pr√©c√©dent)
C-c C-f
     Forward, prochain titre de m√™me niveau (*b* backward)
C-c C-u
     Up, titre de niveau sup√©rieur
C-c C-j
     Jump, permet de faire une recherche dans une copie du fichier
     courant (avec les titres d√©velopp√©s au mini par rapport √† la
     position courante) avant se repositionner dans le buffer d'origine.
     Noter qu'on peut retourner au point courant avec *C-c &*


File: emacs-documentation.info,  Node: Saisies agenda,  Next: Affichage des agendas,  Prev: Navigation dans les titres,  Up: org-mode

7.4 Saisies agenda
==================

   ‚Ä¢ Le format des stamps peut √™tre customis√©/francis√© en changeant deux
     variables
          '(org-display-custom-times t)
          '(org-time-stamp-custom-formats (quote ("<%a %d/%m/%y>" . "<%a %d/%m/%y %H:%M>")))
   ‚Ä¢ La liste de mes fichiers √† prendre en compte pour l'agenda est
          (setq org-agenda-files
                '("~/CloudStation/Org/Contacts.org"
                  "~/CloudStation/Org/Projets.org"
                  "~/CloudStation/Org/Procedures.org"
                  "~/CloudStation/Org/todo-2024.org"
                  "~/CloudStation/Org/todo-2024.org_org"))

   ‚Ä¢ C-c .  choix d'une date (*Shift Rigth/Left/Up/Down* pour d√©placer
     la date).  en pr√©c√©dent par *C-u* on ins√®re date et heure courante.
     Noter le d√©palcement dans le calendrier propos√© par *S-right* et
     *S-left*.  On peut aussi mettre un d√©lai relatif avec +45m +2h +1d
     +2w +1M +5y (45minutes 2heures 1jour 2wemaines 1mois 5ans) ou 3
     lettres d'un jour de la semaine en anglais
   ‚Ä¢ C-u C-c .  ins√®re la date et heure courante
        ‚Ä¢ Noter que *C-c .*  permet de modifier un time stamp et d'y
          ajouter un HH:MM voir si n√©cessaire un HH:MM-HH:MM pour un
          intervalle, qui peut aussi se noter HH:MM+NN:XX enfin un
          intervalle de dates s√©par√©es par -
   ‚Ä¢ C-c C-d choix d'une deadline
   ‚Ä¢ C-c C-s choix d'un schedule.  En plus de se d√©placer, on peut taper
     NN pour aller √† la date NN du mois courant, ou +1m pour aller √†
     dans 1 mois (ou d jour, w semaine) En compl√©ment, on peut faire des
     r√©p√©titions (en ajoutant un +1m pour mensuel), plus -5d pour faire
     un warning 5 jours avant.  Noter qu'un *C-c t* ne fait le todo que
     pour l'occurence actuelle.

   ‚Ä¢ C-c / d pour rechercher des dates de *deadlines* selon type,
     keyword, ... en pr√©fixant via *C-n* on recherche les date jusqu'√†
     Today+n
   ‚Ä¢ C-c / a pour une recherche des dates *after* une date
   ‚Ä¢ C-c a L Liste les dates du buffer courant
   ‚Ä¢ C-c a Le menu des diff√©rentes synth√®se de dates du fichier courant
     v
          permet de changer de vue (mensuelle, annuelle par exemple)
     b/f
          de voir la p√©riode pr√©c√©dente / suivante
   ‚Ä¢ C-c [ marque le fichier courant comme √©tant √† prendre en compte
     comme un fichier √† analyser pour les agendas (pour la session en
     cours))
   ‚Ä¢ C-c / Sparce tree - highlight matches.  Pr√©c√©d√© d'un *C-u* on
     ajoute les matchs √† ceux de la recherche pr√©c√©dente.  La
     suppression de tout match se fait par *C-c C-c*.
     r
          Regexp - pour surligner les matchs.  On peut ensuite se placer
          sur le match suivant avec *Alt-g n* ou *p* pour pr√©c√©dent


File: emacs-documentation.info,  Node: Affichage des agendas,  Next: Chronom√©trage,  Prev: Saisies agenda,  Up: org-mode

7.5 Affichage des agendas
=========================

Ajout√© le _<2017-04-23 dim.  14:01>_
C-c a
     pr√©fixe des commandes de l'*agenda*.  Attention suppose
     l'activation dans le fichier init soit: ‚Äò(global-set-key "\C-ca"
     'org-agenda)‚Äô
     t
          liste tous les todo du fichier
     a
          agenda pour la semaine courante
     n
          agenda pour la semaine courante et autres TODO (moins urgents)
g
     reconstruit l'affichage suite √† des modifs des fichiers d'origine
s
     sauve tous les buffers d'origine suite √† modif sur agenda
TAB
     pour afficher la date dans son contexte
f
     forward, affiche la p√©riode suiante (week, month...), pr√©c√©dente
     avec *b*
j
     pour choisir la date de la vue choisie
v
     permet de choisir d'autres affichages que la semaine
     m
          pour un mois
     e
          Permet d'afficher dans l'agenda le texte des entr√©es
C-c C-t
     Permet de changer de TODO en DONE ou Std.  Noter que si l'entr√©e
     est r√©p√©t√©e, cela schedule la prochaine occurence.


File: emacs-documentation.info,  Node: Chronom√©trage,  Next: org-roam,  Prev: Affichage des agendas,  Up: org-mode

7.6 Chronom√©trage
=================

C-c C-x C-i
     (in) D√©marre le chronom√©trage du temps sur une t√¢che
C-c C-x C-o
     (out) Arr√™te le chronom√©trage du temps sur une t√¢che
C-c C-x C-d
     (display) Affiche le cumul du temps de chaque t√¢che


File: emacs-documentation.info,  Node: org-roam,  Next: org-capture,  Prev: Chronom√©trage,  Up: org-mode

7.7 org-roam
============

-Voir Org-Roam-Memento
(../Org/org-roam/20201226174008-org_roam_memento.org) d√©couvert le
2020-12-26 (../Org/org-roam/daily/2020-12-26.org)
M-x org-roam-insert
     pour inserer un lien vers une note existante ou nouvelle (ex:
     retour au home (20201226160626-debut.org) qui est aussi la page
     debut (20201226160626-debut.org))
M-x org-roam
     pour afficher les backlinks de la note en cours
M-x org-roam-graph
     pour g√©n√©rer avec graphwiz et dans le navigateur les liens entre
     les notes.
M-x org-roam-dailies-find-date
     pour ouvrir les notes d'une journ√©e (today par defaut)
C-c C-O
     ouverture du lien
C-c C-l
     √©dition du lien (destination puis libell√©)
Raccourcis clavier sugg√©r√©s
     Mais pb au d√©marrage
          (define-key org-mode-map (kbd "C-c c") 'org-capture)
          ;;(define-key org-mode-map (kbd "C-c r") 'org-roam-insert) BUG, faire avec M-x
          (define-key org-mode-map (kbd "C-c t") 'org-roam-dailies-find-today)
          (define-key org-mode-map (kbd "<f12>") 'org-roam)
     Du coup en raccourcis globaux
          (global-set-key "\C-ct" 'org-roam-dailies-find-today) ; roam to today's note
          ;;(global-set-key "\C-ci" 'org-roam-insert) ; cr√©ation de sous note
          (global-set-key "\C-cx" 'org-roam) ; roam display links to page toggle
     Compl√©ter avec des recherches via l'agenda org-mode *C-c as*


File: emacs-documentation.info,  Node: org-capture,  Next: Tableaux,  Prev: org-roam,  Up: org-mode

7.8 org-capture
===============

org-capture
     Capture, √† partir d'un des templates d√©finis dans la variable
     *org-capture-template*
          (org-capture-templates
            (quote
              (("m" "Contact mail" item
                (file "~/CloudStation/Org/Contacts.org")
                "%^{Type de contact|Perso|Rouen|Famille} %T %i %?" :prepend t)
              ("t" "T√¢che" entry
                (file "~/CloudStation/Org/Engagements.org")
                "* TODO %i\\n  SCHEDULED: %^t\\n  %?" :prepend t)
              ("p" "Proc√©dure par date" entry
              (file+olp "~/CloudStation/Org/Procedures.org" "Vrac")
              "%i")
            ("j" "ProJets" entry
              (file+olp "~/CloudStation/Org/Projets.org" "Liste")
              "%i%?" :prepend t))))


File: emacs-documentation.info,  Node: Tableaux,  Next: Pr√©sentation revealjs,  Prev: org-capture,  Up: org-mode

7.9 Tableaux
============

* Menu:

* D√©parts::
* Saisies::
* Manipulation lignes et colonnes::
* Formules::


File: emacs-documentation.info,  Node: D√©parts,  Next: Saisies,  Up: Tableaux

7.9.1 D√©parts
-------------

C-u M-!
     pour r√©cup√©rer le r√©sultat d'une commande shell
C-c |
     transformer la r√©gion s√©lectionn√©e en tableau via la conversion
     auto (champs s√©par√© par des comma, ou TAB ou espaces)


File: emacs-documentation.info,  Node: Saisies,  Next: Manipulation lignes et colonnes,  Prev: D√©parts,  Up: Tableaux

7.9.2 Saisies
-------------

Un exemple de tableau (juste pour v√©rifier), pour le taper il suffit:

   ‚Ä¢ de commencer par ‚Äò|-+‚Äô et de taper *TAB*.
   ‚Ä¢ de taper les diff√©rents titres s√©par√©s par des ‚Äò|‚Äô
   ‚Ä¢ apr√®s un *C-j* taper les diff√©rentes cases et les s√©parer par des
     *TAB*
   ‚Ä¢ noter que la largeur est adapt√©e automatiquement pour pouvoir
     contenir le contenu le plus large.

   ‚Ä¢ C-c - pour ins√©rer une ligne horizontale de s√©paration
   ‚Ä¢ C-c * permet de recalculer la ligne courante.  (C-u pour toutes les
     formules)
   ‚Ä¢ C-c C-c sur la ligne TBLFM permet de recalculer les formules
   ‚Ä¢ C-c = pour permettre d'ins√©rer une formule, les cases sont not√©e
     genre par ‚Äò@2$3‚Äô pour la deuxi√®me ligne, troisi√®me case.  Une zone
     par *@1$1..@4$5*
   ‚Ä¢ S-Enter compl√®te la case en dessous en incr√©mentant valeur la
     courante
   ‚Ä¢ <NN> dans une case signifie qu'on veut une largeur de NN caract√®res
   ‚Ä¢ <c> center, centre la colonne
   ‚Ä¢ <l> left, aligne la colonne √† gauche


File: emacs-documentation.info,  Node: Manipulation lignes et colonnes,  Next: Formules,  Prev: Saisies,  Up: Tableaux

7.9.3 Manipulation lignes et colonnes
-------------------------------------

M-Down
     d√©place la ligne vers le bas (Up, vers le haut)
M-Right
     d√©place la colonne vers la droite (*Left*, vers la gauche)
C-c ^
     Trie les lignes selon la colonne courante, saisir le type de tri
     (en majuscule pour un tri inverse).  Noter que le tri s'arr√™te √† la
     premi√®re s√©paration horizontale.
     a
          Alphab√©tique
     n
          Num√©rique
     t
          Time
S-M-Left
     supprime la colonne courante
S-M-Right
     Ins√®re une colonne avant la courante
M-x org-export-table
     permet d'exporter la tableau en cours dans un csv


File: emacs-documentation.info,  Node: Formules,  Prev: Manipulation lignes et colonnes,  Up: Tableaux

7.9.4 Formules
--------------

Les formules sont de type alg√©brique.  Pour faire du elisp il faut les
commencer par *'*

   Commencer par ‚Äò=‚Äô pour une formule qui s'applique √† toute la colonne,
par ‚Äò:=‚Äô pour une seule case.

   Pour recalculer la case courante *C-c C-c* (tout le tableau si plac√©
sur la ligne des formules)

   Les cases de la ligne courante sont *$1* √† *$n* si besoin de pr√©ciser
la ligne *@m$n*.  L'avant derni√®re ligne peut se noter *@-1*.

   Deux notations possibles pour les cases, soit *A1* et *C5* pour @1$1
et @5$3

   Pour pr√©ciser un format l'ajouter apr√®s la formule, ‚Äò;%.1f %%‚Äô pour
afficher un pourcentage √† 0.1 pr√®s.

   Pour calculer sur des dur√©e on peut pr√©ciser le format √† la fin de la
formule, exemple ‚Äò:=vsum(@2..@-1);T‚Äô

C-c +
     Permet de faire la somme des cases de la colonne au dessus
sum
     pour la somme d'une r√©gion (voir comment la d√©finir)
vsum
     pour la somme du vecteur
vmean
     pour la moyenne du vecteur
C-c =
     Pour commencer la saisie d'une formule applicable √† toute la
     colonne (pr√©c√©d√© de *C-u* c'est uniquement pour la case)
C-c ?
     permet d'afficher dans mini buffer les noms de la case du curseur
C-c '
     pour √©diter dans un buffer sp√©cial l'ensemble des formules de la
     table.  Noter que les r√©f√©rences des cellules sont mis en
     sur-brillance dans le buffer normal de la table.  Sortie par *C-c
     C-c* (abort par *C-c q*) *S-Left/Right/Up/Down* permet de
     s√©lectionner une ref !
C-c }
     permet d'afficher les lettres et chiffres des cases du tableau
C-c {
     permet de passer en debug (bascule).  Ouvre un buffer avec les
     √©tapes du calcul de la formule

     Pr√©nom    Surnom           Age     Commentaire
     -----------------------------------------------------------------
     Moi       Me               56      NA
     Toi       mon toi          54      pas utile de pr√©ciser
     Barbara   mon b√©b√©         22      qui a pass√© son permis!
     Kro       mon petit b√©b√©   17      qui pourrait devenir grande
     Somme                      149     Age cumul√©
     Moyenne                    37.25   Age moyen


File: emacs-documentation.info,  Node: Pr√©sentation revealjs,  Next: Pour aller plus loin,  Prev: Tableaux,  Up: org-mode

7.10 Pr√©sentation reveal.js
===========================

   ‚Ä¢ T√©l√©charger le tar.gz sur le site de ref
     (https://github.com/hakimel/reveal.js/releases)
   ‚Ä¢ T√©l√©charger le package *ox-reveal*
   ‚Ä¢ Ajouter du param√©trage dans *init.el*


File: emacs-documentation.info,  Node: Pour aller plus loin,  Next: Org-babel et inclusion de sources,  Prev: Pr√©sentation revealjs,  Up: org-mode

7.11 Pour aller plus loin
=========================

Une config tr√®s compl√®te
(http://doc.norang.ca/org-mode.html#HowToUseThisDocument)


File: emacs-documentation.info,  Node: Org-babel et inclusion de sources,  Next: Inclusion de requ√™tes mysql,  Prev: Pour aller plus loin,  Up: org-mode

7.12 Org-babel et inclusion de sources
======================================

Il faut une d√©finition dans init.el du type
     (org-babel-do-load-languages
      'org-babel-load-languages
      '(
        (python . t)
        (shell . t)
        (sql . t)
        ))


File: emacs-documentation.info,  Node: Inclusion de requ√™tes mysql,  Next: Inclusion de code SQLite,  Prev: Org-babel et inclusion de sources,  Up: org-mode

7.13 Inclusion de requ√™tes mysql
================================

   ‚Ä¢ Voir r√©f√©rence
     (https://orgmode.org/worg//org-contrib/babel/languages/ob-doc-sql.html)
   ‚Ä¢ suppose le package emacs *org-sql*
   ‚Ä¢ quelques exemples
          -- SHOW TABLES;
          EXPLAIN user;
          -- EXPLAIN archive;

          SELECT * FROM archive LIMIT 10;

   ‚Ä¢ les param√®tres peuvent √™tre d√©finis dans le fichier .org avec un
     en-t√™te du type suivant (en fait c'est une autre fa√ßon de placer
     les param√®tres, mais ils ne sont pas factoris√©s entre deux
     requ√™tes)
          SELECT id, name, dist FROM user ORDER BY id DESC LIMIT 8;

          SELECT id, name, dist FROM user ORDER BY dist DESC LIMIT 15;


File: emacs-documentation.info,  Node: Inclusion de code SQLite,  Next: Inclusion de diagrammes Ditaa,  Prev: Inclusion de requ√™tes mysql,  Up: org-mode

7.14 Inclusion de code SQLite
=============================

   ‚Ä¢ Un exemple sur la base de IKV pour du CSV en sortie dans un fichier
     et l'affichage du nb de trajets
          .headers on
          .mode csv
          .output ikv-trajets.csv
          SELECT date, login, user.id FROM trajet LEFT JOIN user ON trajet.userid=user.id ORDER BY login;
          .output stdout
          SELECT count(date) as nb_trajet FROM trajet LEFT JOIN user ON trajet.userid=user.id ORDER BY login;

   ‚Ä¢ Une variante avec sortie par d√©faut
          SELECT login,count(date) FROM trajet LEFT JOIN user ON trajet.userid=user.id GROUP BY user.login;

     login       count(date)
     --------------------------
     csageot     1
     dwendling   4
     pdedieu     9

   ‚Ä¢ Contenu d'une table, avec une variable (peut-√™tre plus court ?):
          SELECT * FROM $nomtable;

     id   name               login       email                dist
     -----------------------------------------------------------------
     1    Pierre DEDIEU      pdedieu     pdedieu@rouen.fr     13800
     2    Denis WENDLING     dwendling   dwendling@rouen.fr   29000
     3    Corine SAGEOT      csageot     csageot@rouen.fr     7000
     4    Emmanuel HAMELET   ehamelet    ehamelet@rouen.fr    8000

   ‚Ä¢ Une requ√™te courte
          SELECT name, login, dist/1000.0 FROM user;

     name               login       dist/1000.0
     ---------------------------------------------
     Pierre DEDIEU      pdedieu     13.8
     Denis WENDLING     dwendling   29.0
     Corine SAGEOT      csageot     7.0
     Emmanuel HAMELET   ehamelet    8.0


File: emacs-documentation.info,  Node: Inclusion de diagrammes Ditaa,  Next: Inclusion de sh√©mas UML,  Prev: Inclusion de code SQLite,  Up: org-mode

7.15 Inclusion de diagrammes Ditaa
==================================

Voir
<http://ehneilsen.net/notebook/orgExamples/org-examples.html#sec-2-6>

   Noter qu'il faut installer le package ditaa (par apt ou yum) ET faire
un lien symbolique depuis le chemin o√π il est cherch√© par emacs.

   Lors d'un export, le message est affich√© du type
‚Äòorg-babel-execute:ditaa: Could not find ditaa.jar at
/usr/share/emacs/25.1/lisp/contrib/scripts/ditaa.jar‚Äô .

   Cr√©er le r√©pertoire et faire un lien symbolique vers le fichier
ditaa.jar

   Le code suivant est peut √™tre n√©cessaire:
     (org-babel-do-load-languages
      'org-babel-load-languages
      '((ditaa . t)))
     (setq org-ditaa-eps-jar-path "/usr/share/ditta/ditaa.jar")

   Voir l'exemple suivant:


File: emacs-documentation.info,  Node: Inclusion de sh√©mas UML,  Next: Exportation,  Prev: Inclusion de diagrammes Ditaa,  Up: org-mode

7.16 Inclusion de sh√©mas UML
============================

Il faut installer le package *plantuml* via apt ou yum.  Mais il semble
aussi qu'il faille un *plantuml.jar* et indiquer son chemin.

   Le code suivant est peut √™tre n√©cessaire:
     (org-babel-do-load-languages
      'org-babel-load-languages
       '((plantuml . t)))
      (setq org-plantuml-eps-jar-path "/usr/share/plantuml/plantuml.jar")


File: emacs-documentation.info,  Node: Exportation,  Next: Formules math√©matiques,  Prev: Inclusion de sh√©mas UML,  Up: org-mode

7.17 Exportation
================

Il est possible de changer le format d'exportation des time stamp via la
variable *org-export-date-timestamp-format* par exemple
     (setq org-display-custom-times t)
     (setq org-time-stamp-custom-formats '("<%A %d/%m/%Y>" . "<%A %d/%m/%Y %H:%M>"))
   Mais il faut utiliser la bascule entre std et custom par ‚ÄòC-c C-x
C-t‚Äô soit ‚Äò(org-toggle-time-stamp-overlays)‚Äô trouv√© le _<2023-01-09 lun.
19:24> _ ou en tout cas _<2023-01-09 lun.>_

* Menu:

* M√©thode actuelle simple::
* Pandoc::
* Suite √† disparition export odt, interface √† pandoc (histrique): Suite √† disparition export odt interface √† pandoc (histrique).


File: emacs-documentation.info,  Node: M√©thode actuelle simple,  Next: Pandoc,  Up: Exportation

7.17.1 M√©thode actuelle simple
------------------------------

Pour produire de la bureautique, des pdf ou des pr√©sentations √† partir
de fichiers Org.  Attention, il semble que pour le traitement de texte,
seul l'export en docx continue de marcher, il faut pr√©voir dans
*Customize* de changer *Org Odt Preferred Output format* en *docx* au
lieu d'*odt*.

   Les exports ont √©t√© plusieurs fois cass√©s, et une correction magique
a √©t√© *C-u M-x org-reload* soit *C-u C-c C-x !*.  Plus radical sur
Ubuntu: r√©-installation de *org* √† partir de melpa.

   Noter qu'il est utile de pr√©ciser la langue du document org, en
particulier pour le titre de la table des mati√®res: ‚Äò#+LANGUAGE: fr‚Äô

   Pour ignorer un titre, lui ajouter un tag *noexport* via *C-c C-c*
sur le titre.

C-c C-e E e
     Exporte en epub (n√©cessite *ox-epub* de melpa et l'ajout de *epub*
     dans la ligne du .emacs: ‚Äò(org-export-backends (quote (epub
     html5slide html latex odt)))‚Äô

     J'ai plusieurs fois eu des √©checs lors des exports, et il semble
     qu'en dernier recours, un effacement des versions compil√©es des
     sources elisp fasse surmonter cela:
          for dir in "$HOME/.emacs.d/elpa/org-"*/; do find $dir -name "*.elc" -delete; done

        ‚Ä¢ Noter les remarques de l'auteur du module sur les variables
          *obligatoires* pour un fichier org √† convertir:
             ‚Ä¢ There are some required export options that need to be
               set.  These are:
               UID
                    a unique id of the document, otherwise known as uri,
                    may be a url
               DATE
                    the date of the document, for valid values see
                    <https://www.w3.org/TR/NOTE-datetime>
               AUTHOR
                    the document author or editor, the creator in the
                    EPUB spec
               TITLE
                    the document title
             ‚Ä¢ Furthermore there are some properties which are optional:
               Subject
                    the subject matter of the book
               Description
                    a description of the book
               Publisher
                    the publisher of the book
               License
                    the rights associated with this book, the copyright
                    notice and further rights may be included in this
                    option.

C-c C-e o O
     Exporte en OpenOffice Texte et l'ouvre (sauf dans une version plus
     r√©cente d'emacs, o√π la fonction n'est plus disponible en raccourci
     / menu mais via *Alt-x org-odt-export-to-odt* (pour le revoir il
     faut ajouter un ‚Äò(setq org-export-dispatch-use-expert-ui 1)‚Äô) Voir
     aussi le param√©trage d√©taill√© via *M-x org-customize* et
     l'activation de *odt* dans les exports.
C-c C-e h o
     pour afficher le r√©sultat d'une conversion en HTML
C-c C-e i i
     exporte comme un fichier info.  N√©cessite d'installer *makeinfo* et
     un ‚Äò(require ox-texinfo)‚Äô.  Le fichier est optionnellement √†
     d√©poser dans *_usr/share/info_* (un hardlink est encore mmieux
     qu'une copie) et pour le rendre accessible l'ajouter dans le menu
     */usr/share/info/dir* avec une ligne du type
          * Emacs fran√ßais: (emacs-documentation).        Ma synth√®se en fran√ßais
     avant *:* le titre qui appara√Æt dans la page info par d√©faut entre
     parenth√®ses le nom du fichier info (sans son extension) apr√®s un
     *.*  la description du contenu du fichier info.
C-c C-e l o
     pour faire du Latex puis pdf ... et l'ouvrir noter qu'il est
     int√©ressant de pr√©ciser ‚Äò#+LATEX_HEADER:
     \usepackage[french]{babel}‚Äô pour avoir les dates, les titres
     francis√©s !

     Noter que la conversion en latex puis pdf n√©cessite *texlive* (gros
     !), *texlive-latex-extra* (tr√®s gros aussi !!).  et la pr√©visu dans
     emacs *dvipng*.  emacs semble bien s'am√©liorer pour Tex avec
     *AUCTex* (pour ouvrir les .tex mais je ne trouve pas qu'en faire)

     Si on veut faire du XSLT pour DocBook, il faut ajouter
     *xsltproc*... mais l√† c'est pire que tout (Erreur: ... √† analyser)
C-c C-e C-v ...
     idem mais n'affiche que ce qui est *visible* √† l'√©cran


File: emacs-documentation.info,  Node: Pandoc,  Next: Suite √† disparition export odt interface √† pandoc (histrique),  Prev: M√©thode actuelle simple,  Up: Exportation

7.17.2 Pandoc
-------------

   ‚Ä¢ Commencer par installer le paquet ‚Äòapt install pandoc‚Äô
   ‚Ä¢ Installer le package MELPA ‚Äòox-pandoc‚Äô
   ‚Ä¢ Il est ensuite possible d'appeler ‚ÄòM-x org-pandoc-export-*‚Äô pour
     produire les diff√©rents format support√©s (j'aime html5, epub3,
     slidy pour pr√©sentation HTML, ppx, docx)
   ‚Ä¢ Les variables disponibles sont dans le git de ox-pandoc
     (https://github.com/kawabata/ox-pandoc)
   ‚Ä¢ Pour des pdf beamer, il faut installer en plus des paquets texlive
     et perso je n'ai pas abouti
        ‚Ä¢ *texlive-pictures*
        ‚Ä¢ *texlive-plain-generic*
        ‚Ä¢ *texlive-xetex*
             ‚Ä¢ Pour identifier les paquets contenant des fichiers
               manquants, noter qu'il peut √™tre utile d'installer
               *apt-file* puis de faire une ‚Äòapt-file search XXX.sty‚Äô
             ‚Ä¢ Apr√®s quoi j'ai un message qui me sugg√®re de changer de
               pdf-engine ‚Äò(setq org-pandoc-options-for-beamer-pdf
               '((pdf-engine . "xelatex")))‚Äô


File: emacs-documentation.info,  Node: Suite √† disparition export odt interface √† pandoc (histrique),  Prev: Pandoc,  Up: Exportation

7.17.3 Suite √† disparition export odt, interface √† pandoc (histrique)
---------------------------------------------------------------------

     (defun convert-org-to-docx ()
       "Converti le buffer courant en MS-Office Word"
       (interactive)
       (let* ((dest (replace-regexp-in-string "\.org$" ".docx" (buffer-file-name)))
              (cmd (format "pandoc -f org -t docx %s -o %s" (buffer-file-name) dest)))
         (shell-command cmd)
         (message cmd)))
     (defun convert-org-to-epub ()
       "Converti le buffer courant en epub"
       (interactive)
       (let* ((dest (replace-regexp-in-string "\.org$" ".epub" (buffer-file-name)))
              (cmd (format "pandoc -f org -t epub %s -o %s" (buffer-file-name) dest)))
         (shell-command cmd)
         (message cmd)))


File: emacs-documentation.info,  Node: Formules math√©matiques,  Next: Inclure des diagrammes,  Prev: Exportation,  Up: org-mode

7.18 Formules math√©matiques:
============================

\frac{\pi}{4} = \int_0^1{\sqrt{1-x^2}^2 dx} et U_n=\sum_{i=0}^n{ \frac{i
. x_i}{1+x_i^2} }

   Qui est obtenu par: ‚Äò\(\frac{\pi}{4} = \int_0^1{\sqrt{1-x^2}^2 dx}\)‚Äô
et ‚Äò\(U_n=\sum_{i=0}^n{ \frac{i . x_i}{1+x_i^2} }\)‚Äô

   Autre essai \int_{-1}^{72}{\frac{1+log(x)}{x+\frac{1}{\sqrt{x}^3}}}
avec ‚Äò\(\int_{-1}^{72}{\frac{1+log(x)}{x+\frac{1}{\sqrt{x}^3}}}\)‚Äô


File: emacs-documentation.info,  Node: Inclure des diagrammes,  Next: Produire un export Word avec un template,  Prev: Formules math√©matiques,  Up: org-mode

7.19 Inclure des diagrammes
===========================

   ‚Ä¢ avec graphviz: voir <http://www.tonyballantyne.com/graphs.html>
   ‚Ä¢ en ligne de commande *dot -Tpng filename.dot -o outfile.ps*


File: emacs-documentation.info,  Node: Produire un export Word avec un template,  Prev: Inclure des diagrammes,  Up: org-mode

7.20 Produire un export Word avec un template
=============================================

One of my less enjoyable tasks is to produce a weekly status report
following a particular look.  This then gets emailed off and compiled
with others.  Unsurprisingly the format has to be Microsoft Word and no
one ever gets the use of format styles correct.

   Editing the pro-forma always has me cursing: delete one character too
many and fonts change, bullets appear or disappear, all the usual joys
of Word.  Emacs, and more specifically org-mode to the rescue.  Org has
had the ability to export in several formats (typically \latex and HTML)
for quite some time but now boasts support for OpenDocument format too.

   So my status reports are now written using Emacs with a line setting
‚Äò(setq org-export-odt-styles-file ~/MonTemplate)‚Äô to point at a hand
handcrafted OpenDocument template file.  That sorts out the presentation
aspects of the final document.  C-c C-e o exports my text to
OpenDocument then open that in LibreOffice and save as Microsoft Word
format.  The conversion from ODT to docx format can be automated:
‚Äòsoffice --headless --convert-to docx myfilename.‚Äô

   I wouldn't say that I actually enjoy writing my status reports now,
but at least it's considerably less painful, I can just get on with
writing information and not with fighting the tool.


File: emacs-documentation.info,  Node: Tramp,  Next: Installation initiale pour Ubuntu sur HyperV,  Prev: org-mode,  Up: Top

8 Tramp
*******

G√©n√©ralisation de noms de fichiers pour une utillisation de ressources
sit√©es sur d'autres machine.

* Menu:

* ssh::
* ftp::
* sudo::
* rclone Google Drive::
* Stockage des mots de passe::
* Copie de fichiers entre deux r√©pertoires tramp dired::


File: emacs-documentation.info,  Node: ssh,  Next: ftp,  Up: Tramp

8.1 ssh
=======

Les URL sont du type ‚Äò/ssh:user@host:/repertoire/fichier‚Äô


File: emacs-documentation.info,  Node: ftp,  Next: sudo,  Prev: ssh,  Up: Tramp

8.2 ftp
=======

Les URL sont du type ‚Äò/ftp:user@host:/repertoire/fichier‚Äô


File: emacs-documentation.info,  Node: sudo,  Next: rclone Google Drive,  Prev: ftp,  Up: Tramp

8.3 sudo
========

Les URL sont du type ‚Äò/sudo:user@host:/repertoire/fichier‚Äô Pour un
fichier local en root ‚Äò/sudo::/repertoire/fichier‚Äô Il est aussi possible
de combiner avec SSH par ‚Äò/ssh:user@host|sudo:host:/repertoire/fichier‚Äô


File: emacs-documentation.info,  Node: rclone Google Drive,  Next: Stockage des mots de passe,  Prev: sudo,  Up: Tramp

8.4 rclone Google Drive
=======================

   ‚Ä¢ Apr√®s une installation du pacquet de la distribution et la
     configuration d'un storage de type 18 via ‚Äòrclone config‚Äô
   -URL ‚Äò/rclone:storage:/repertoire/fichier‚Äô


File: emacs-documentation.info,  Node: Stockage des mots de passe,  Next: Copie de fichiers entre deux r√©pertoires tramp dired,  Prev: rclone Google Drive,  Up: Tramp

8.5 Stockage des mots de passe
==============================

   ‚Ä¢ Lors des acc√®s il est propos√© de stocker dans ~/.authinfo Cela
     permet d'acc√©l√©rer la connexion, mais il faut pr√©f√©rer le Passcode
     duo, qui varie √† chaque connexion et donc est redemand√©
     (contrairement √† un simple mot de passe).Le cas de Duo sur
     t√©l√©phone pr√©sente le m√™me avantage
   ‚Ä¢ Pour √©viter ce fichier pr√©sent en clair, utiliser ~/.authinfo.gpg,
     et pour qu'il soit propos√© en premier pour y ajouter les nouveaux
     MDP penser √† modifier la variable *auth-sources* pour lui retirer
     la version .authinfo (ou la placer apr√®s .authinfo.gpg)
   ‚Ä¢ Pour une saisie de la passphrase sans fausses frappes (!)  pr√©f√©rer
     la saisie int√©gr√©e dans emacs soit les modifications suivante
        ‚Ä¢ ajouter une ligne ‚Äòallow-loopback-entry‚Äô dans
          ‚Äò~/.gnupg/gpg-agent.conf‚Äô
        ‚Ä¢ modififier la variable *epa-pinentry-mode* et choisir
          *'loopback* (j'ai choisi de le faire via *C-h v
          epa-pinentry-mode* puis choisir *Customize* et enfin *Save for
          future sessions)*
        ‚Ä¢ selon la version d'emacs ce peut √™tre *epa-pinentry-mode* et
          la ligne peut-√™tre ‚Äòallow-loopback-pinentry‚Äô (voir pour des
          versions plus r√©centes de GnuPG ne plus √™tre n√©cessaire) !
        ‚Ä¢ dans une occurence suivante c'est devenu ‚Äòepg-pinentry-mode‚Äô


File: emacs-documentation.info,  Node: Copie de fichiers entre deux r√©pertoires tramp dired,  Prev: Stockage des mots de passe,  Up: Tramp

8.6 Copie de fichiers entre deux r√©pertoires tramp dired
========================================================

   ‚Ä¢ Commencer par copier le r√©pertoire de destination avec ‚Äòw‚Äô sur la
     premi√®re ligne du r√©pertoire dired
   ‚Ä¢ Se placer sur le dired de la source et utiliser ‚ÄòC‚Äô puis ‚ÄòC-y‚Äô (ou
     ‚ÄòM-y‚Äô si pas le premier)
   ‚Ä¢ Plus pratique avec ‚Äò(setq dired-dwim-target t)‚Äô si on a ouvert 2
     dired (un pour la source et un pour la destination) il suffit de
     taper ‚ÄòC‚Äô sur le fichier source et la destination est propos√©e par
     d√©faut (accepter par Return)


File: emacs-documentation.info,  Node: Installation initiale pour Ubuntu sur HyperV,  Next: Liens externes,  Prev: Tramp,  Up: Top

9 Installation initiale pour Ubuntu sur HyperV
**********************************************

   ‚Ä¢ HyperV activ√©, vswitch externe cr√©√©, iso ubuntu desktop pr√©sent√©
   ‚Ä¢ reste fig√© apr√®s un √©cran initial encourageant (semble li√© √†
     l'utilisation non judicieuse du console mode enhanced)
   ‚Ä¢ faute de mieux j'ai utilis√© l'assistant de cr√©ation de VM Ubuntu
     22.04 de Hyperv
   ‚Ä¢ Je le met en IP fixe avec ma 103.16 pr√©c√©dente qui a le droit de
     sortir sur internet
   ‚Ä¢ La mise √† jour vers 23.04 semble Ok, mais il faut penser √† agrandir
     le HD (13 Go par d√©faut pass√© √† 40)
   ‚Ä¢ Pour le r√©seau, en plus de d√©finir un vSwitch externe il faut
     penser √† le connecter sur la bonne interface r√©seau du PC (pour moi
     Lenovo USB)
   ‚Ä¢ J'utilise voir pour passer en mode enhanced console comme pr√©cis√©
     dans
     <https://www.nakivo.com/blog/install-ubuntu-20-04-on-hyper-v-with-enhanced-session/>
     en particulier cela n√©cessite une installation compl√©mentaire dans
     la VM Ubuntu
        ‚Ä¢ le enhanced mode permet de g√©rer le multi √©cran et le
          *copier-coller*
   ‚Ä¢ emacs penser √† ajouter melpa et les packages:
        ‚Ä¢ use-package
        ‚Ä¢ paredit
        ‚Ä¢ magit
        ‚Ä¢ highlight-parentheses
        ‚Ä¢ helm
        ‚Ä¢ sudo-edit
        ‚Ä¢ projectile
   ‚Ä¢ r√©cup√©rer l'essentiel de mon init.el dont
        ‚Ä¢ la conf clavier de helm
        ‚Ä¢ desktop-save-mode
   ‚Ä¢ Telecharger configurer synlology-drive-client pour mon DS216+
        ‚Ä¢ Le nom public:
        ‚Ä¢ mon login:


File: emacs-documentation.info,  Node: Liens externes,  Prev: Installation initiale pour Ubuntu sur HyperV,  Up: Top

10 Liens externes
*****************

   ‚Ä¢ Un cookbook pour faire des notebooks dans org
     (http://ehneilsen.net/notebook/orgExamples/org-examples.html)
   ‚Ä¢ Une piste pour faire des exports org en pr√©sentation
     (http://jr0cket.co.uk/2013/10/create-html5-presentations-emacs-revealjs.html.html)
     avec reveal.js
   ‚Ä¢ Voir le package elscreen et l'utilisation de plusieurs sessions,
     dont sudo et la compatibilit√© aptitude ?
   ‚Ä¢ Un PPA pour avoir un GlobalProtect avec GUI dans Ubuntu (aucun
     rapport ?)
     <https://launchpad.net/~yuezk/+archive/ubuntu/globalprotect-openconnect>



Tag Table:
Node: Top99
Node: Editeur4452
Node: Ouverture de fichiers5080
Node: Edition7453
Node: Narrowing11278
Node: Recherches11760
Node: Marquage de position dans des fichiers13723
Node: Fen√™tres multiples14126
Node: Fichier de configuration emacs et emacsd/initel15207
Node: assignation de touches15672
Ref: Pour projet python15902
Ref: Ouvrir le r√©pertoire du fichier courant16089
Node: Couleurs et masquage du menu / ic√¥nes16176
Node: use-package pour chargement diff√©r√© de packages16972
Node: Divers autre17592
Node: Exemple avec helm+magit18234
Node: helm et listes plus puissantes20345
Node: Ecrire une extension √† Helm22284
Node: Themes et Font23715
Node: Rectangles24711
Node: Bookmarks25467
Node: Onglets - tabs26332
Node: Abr√©viations26885
Node: Squelettes27499
Node: Sauvegarde de layouts29195
Node: workgroup229510
Node: winner-mode29981
Node: V√©rification de l'orthographe30194
Node: Packages31389
Node: D√©tail32833
Node: multiple-cursors33144
Node: Autre34051
Node: Installer emacs sur un Ubuntu neuf35533
Node: Installer une version plus r√©cente36288
Node: Modes majeurs37082
Node: markdown-mode37317
Node: yaml-ts-mode37563
Node: Modes mineurs37727
Node: linum-mode38257
Node: column-number-mode38425
Node: winner-mode (1)38631
Node: show-parent-mode39084
Node: which-key-mode39333
Node: prettify-symbols-mode39621
Node: auto-revert-tail-mode40139
Node: white-space-mode40433
Node: command-log-mode40738
Node: ido-mode41076
Node: desktop-save-mode41664
Node: cua-mode42041
Node: god-mode42459
Node: Int√©gration OS43035
Node: R√©pertoires43512
Node: Impressions45808
Node: Calculatrices46659
Node: Calculatrice RPN46918
Node: Quick calc49557
Node: Calculatrice Embedded49880
Node: helm-calcul-expression51683
Node: Terminaux et Man51959
Node: eshell53575
Node: Serveur emacs56449
Node: Scripts sur un serveur distant depuis emacs57049
Node: Examples57466
Node: EIN - Emacs IPython Notebook57612
Node: Navigateur web interne - eww57957
Node: Gestion des mails mu4e - Messagerie Exchange58419
Node: Accepter le certificat du serveur Exchange58959
Node: Autre m√©thode pour accepter un certificat refus√©59374
Node: M√©thode plus directe60419
Node: R√©cup√©ration des mails avec offlineimap60833
Ref: Installation62392
Node: Quelques raccourcis clavier67684
Node: Filtre de recherche avec mu68565
Node: Gestion des mails notmuch - Free/GMail69610
Node: Installation (1)69915
Node: Utilisation76057
Node: Macros79264
Node: Programmation et debug81027
Node: Debug de Bash81444
Node: Debug de C et C++83225
Node: Indentation et styles84751
Node: Python85185
Node: Debug86038
Node: Pony-mode88186
Node: python-django89444
Node: Perl90214
Node: elpy pour les programmes python91097
Node: Installation (2)91375
Node: Utilisation (1)92374
Node: java92918
Node: eLISP93499
Node: Chargement de modules97518
Node: Minor-mode98681
Node: Major_mode99710
Node: Major-mode bas√© sur un mode existant99917
Node: Affichage des macros elisp100234
Node: Fabrication d'epub100836
Ref: Actuellement101000
Ref: Historique101156
Ref: Conversions via pandoc sur Apple (org en texte MS Office et epub)101910
Node: Buffer dired ouverts102770
Node: Buffer non associ√© √† un fichier103049
Node: SQL et CLI103231
Node: TAGS104025
Node: Folding104579
Node: Docker104857
Node: Puppet107036
Node: Comparaisons107604
Node: Suivi des versions de sources108821
Node: Int√©gration dans emacs109117
Node: magit111619
Node: Pr√©paration du projet sur git114687
Node: emacs et WikiJS119229
Node: org-mode120094
Node: Notes120757
Ref: Notes-Footnote-1126988
Ref: Notes-Footnote-2127047
Ref: Notes-Footnote-3127131
Ref: Notes-Footnote-4127289
Node: Insertion de lien127394
Node: Navigation dans les titres128707
Node: Saisies agenda129352
Node: Affichage des agendas132261
Node: Chronom√©trage133439
Node: org-roam133813
Node: org-capture135337
Node: Tableaux136241
Node: D√©parts136469
Node: Saisies136785
Node: Manipulation lignes et colonnes137964
Node: Formules138742
Node: Pr√©sentation revealjs141022
Node: Pour aller plus loin141400
Node: Org-babel et inclusion de sources141690
Node: Inclusion de requ√™tes mysql142117
Node: Inclusion de code SQLite143008
Node: Inclusion de diagrammes Ditaa144789
Node: Inclusion de sh√©mas UML145706
Node: Exportation146254
Node: M√©thode actuelle simple147055
Node: Pandoc151410
Node: Suite √† disparition export odt interface √† pandoc (histrique)152631
Node: Formules math√©matiques153574
Node: Inclure des diagrammes154136
Node: Produire un export Word avec un template154493
Node: Tramp155999
Node: ssh156396
Node: ftp156546
Node: sudo156709
Node: rclone Google Drive157052
Node: Stockage des mots de passe157408
Node: Copie de fichiers entre deux r√©pertoires tramp dired159017
Node: Installation initiale pour Ubuntu sur HyperV159771
Node: Liens externes161498

End Tag Table


Local Variables:
coding: utf-8
End:
